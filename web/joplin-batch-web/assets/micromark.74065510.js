import{c as fn}from"./micromark-util-combine-extensions.697f0677.js";import{f as K}from"./micromark-factory-space.8ec3c024.js";import{m as V}from"./micromark-util-character.2c47e118.js";import{s as G,p as dn}from"./micromark-util-chunked.52039b2e.js";import{b as hn,c as pn,l as b,a as xn,d as mn,e as H,h as gn,t as Q,s as Z,f as kn,g as nn,i as rn,j as on,k as U,m as wn,n as J,o as bn,p as Cn,q as vn,r as _n,u as In,v as Sn}from"./micromark-core-commonmark.3fac04b8.js";import{r as yn}from"./micromark-util-resolve-all.d38fe386.js";import{s as An}from"./micromark-util-subtokenize.980f7106.js";const zn={tokenize:Fn};function Fn(e){const t=e.attempt(this.parser.constructs.contentInitial,n,o);let r;return t;function n(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),K(e,t,"linePrefix")}function o(c){return e.enter("paragraph"),i(c)}function i(c){const f=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=f),r=f,u(c)}function u(c){if(c===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(c);return}return V(c)?(e.consume(c),e.exit("chunkText"),i):(e.consume(c),u)}}const Tn={tokenize:En},en={tokenize:On};function En(e){const t=this,r=[];let n=0,o,i,u;return c;function c(l){if(n<r.length){const k=r[n];return t.containerState=k[1],e.attempt(k[0].continuation,f,s)(l)}return s(l)}function f(l){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&T();const k=t.events.length;let w=k,m;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){m=t.events[w][1].end;break}S(n);let C=k;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},m),C++;return G(t.events,w+1,0,t.events.slice(k)),t.events.length=C,s(l)}return c(l)}function s(l){if(n===r.length){if(!o)return x(l);if(o.currentConstruct&&o.currentConstruct.concrete)return I(l);t.interrupt=Boolean(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(en,h,p)(l)}function h(l){return o&&T(),S(n),x(l)}function p(l){return t.parser.lazy[t.now().line]=n!==r.length,u=t.now().offset,I(l)}function x(l){return t.containerState={},e.attempt(en,v,I)(l)}function v(l){return n++,r.push([t.currentConstruct,t.containerState]),x(l)}function I(l){if(l===null){o&&T(),S(0),e.consume(l);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:o}),E(l)}function E(l){if(l===null){O(e.exit("chunkFlow"),!0),S(0),e.consume(l);return}return V(l)?(e.consume(l),O(e.exit("chunkFlow")),n=0,t.interrupt=void 0,c):(e.consume(l),E)}function O(l,k){const w=t.sliceStream(l);if(k&&w.push(null),l.previous=i,i&&(i.next=l),i=l,o.defineSkip(l.start),o.write(w),t.parser.lazy[l.start.line]){let m=o.events.length;for(;m--;)if(o.events[m][1].start.offset<u&&(!o.events[m][1].end||o.events[m][1].end.offset>u))return;const C=t.events.length;let y=C,j,z;for(;y--;)if(t.events[y][0]==="exit"&&t.events[y][1].type==="chunkFlow"){if(j){z=t.events[y][1].end;break}j=!0}for(S(n),m=C;m<t.events.length;)t.events[m][1].end=Object.assign({},z),m++;G(t.events,y+1,0,t.events.slice(C)),t.events.length=m}}function S(l){let k=r.length;for(;k-- >l;){const w=r[k];t.containerState=w[1],w[0].exit.call(t,e)}r.length=l}function T(){o.write([null]),i=void 0,o=void 0,t.containerState._closeFlow=void 0}}function On(e,t,r){return K(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const jn={tokenize:Bn};function Bn(e){const t=this,r=e.attempt(hn,n,e.attempt(this.parser.constructs.flowInitial,o,K(e,e.attempt(this.parser.constructs.flow,o,e.attempt(pn,o)),"linePrefix")));return r;function n(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function o(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}const Pn={resolveAll:un()},Ln=sn("string"),$n=sn("text");function sn(e){return{tokenize:t,resolveAll:un(e==="text"?Mn:void 0)};function t(r){const n=this,o=this.parser.constructs[e],i=r.attempt(o,u,c);return u;function u(h){return s(h)?i(h):c(h)}function c(h){if(h===null){r.consume(h);return}return r.enter("data"),r.consume(h),f}function f(h){return s(h)?(r.exit("data"),i(h)):(r.consume(h),f)}function s(h){if(h===null)return!0;const p=o[h];let x=-1;if(p)for(;++x<p.length;){const v=p[x];if(!v.previous||v.previous.call(n,n.previous))return!0}return!1}}}function un(e){return t;function t(r,n){let o=-1,i;for(;++o<=r.length;)i===void 0?r[o]&&r[o][1].type==="data"&&(i=o,o++):(!r[o]||r[o][1].type!=="data")&&(o!==i+2&&(r[i][1].end=r[o-1][1].end,r.splice(i+2,o-i-2),o=i+2),i=void 0);return e?e(r,n):r}}function Mn(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const n=e[r-1][1],o=t.sliceStream(n);let i=o.length,u=-1,c=0,f;for(;i--;){const s=o[i];if(typeof s=="string"){for(u=s.length;s.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(s===-2)f=!0,c++;else if(s!==-1){i++;break}}if(c){const s={type:r===e.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{line:n.end.line,column:n.end.column-c,offset:n.end.offset-c,_index:n.start._index+i,_bufferIndex:i?u:n.start._bufferIndex+u},end:Object.assign({},n.end)};n.end=Object.assign({},s.start),n.start.offset===n.end.offset?Object.assign(n,s):(e.splice(r,0,["enter",s,t],["exit",s,t]),r+=2)}r++}return e}function Nn(e,t,r){let n=Object.assign(r?Object.assign({},r):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},i=[];let u=[],c=[];const f={consume:T,enter:l,exit:k,attempt:C(w),check:C(m),interrupt:C(m,{interrupt:!0})},s={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:v,sliceSerialize:x,now:I,defineSkip:E,write:p};let h=t.tokenize.call(s,f);return t.resolveAll&&i.push(t),s;function p(a){return u=dn(u,a),O(),u[u.length-1]!==null?[]:(y(t,0),s.events=yn(i,s.events,s),s.events)}function x(a,d){return Dn(v(a),d)}function v(a){return Rn(u,a)}function I(){return Object.assign({},n)}function E(a){o[a.line]=a.column,z()}function O(){let a;for(;n._index<u.length;){const d=u[n._index];if(typeof d=="string")for(a=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===a&&n._bufferIndex<d.length;)S(d.charCodeAt(n._bufferIndex));else S(d)}}function S(a){h=h(a)}function T(a){V(a)?(n.line++,n.column=1,n.offset+=a===-3?2:1,z()):a!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===u[n._index].length&&(n._bufferIndex=-1,n._index++)),s.previous=a}function l(a,d){const _=d||{};return _.type=a,_.start=I(),s.events.push(["enter",_,s]),c.push(_),_}function k(a){const d=c.pop();return d.end=I(),s.events.push(["exit",d,s]),d}function w(a,d){y(a,d.from)}function m(a,d){d.restore()}function C(a,d){return _;function _(A,M,B){let N,P,W,R;return Array.isArray(A)?D(A):"tokenize"in A?D([A]):ln(A);function ln(g){return q;function q(F){const L=F!==null&&g[F],$=F!==null&&g.null,cn=[...Array.isArray(L)?L:L?[L]:[],...Array.isArray($)?$:$?[$]:[]];return D(cn)(F)}}function D(g){return N=g,P=0,g.length===0?B:X(g[P])}function X(g){return q;function q(F){return R=j(),W=g,g.partial||(s.currentConstruct=g),g.name&&s.parser.constructs.disable.null.includes(g.name)?Y():g.tokenize.call(d?Object.assign(Object.create(s),d):s,f,an,Y)(F)}}function an(g){return a(W,R),M}function Y(g){return R.restore(),++P<N.length?X(N[P]):B}}}function y(a,d){a.resolveAll&&!i.includes(a)&&i.push(a),a.resolve&&G(s.events,d,s.events.length-d,a.resolve(s.events.slice(d),s)),a.resolveTo&&(s.events=a.resolveTo(s.events,s))}function j(){const a=I(),d=s.previous,_=s.currentConstruct,A=s.events.length,M=Array.from(c);return{restore:B,from:A};function B(){n=a,s.previous=d,s.currentConstruct=_,s.events.length=A,c=M,z()}}function z(){n.line in o&&n.column<2&&(n.column=o[n.line],n.offset+=o[n.line]-1)}}function Rn(e,t){const r=t.start._index,n=t.start._bufferIndex,o=t.end._index,i=t.end._bufferIndex;let u;return r===o?u=[e[r].slice(n,i)]:(u=e.slice(r,o),n>-1&&(u[0]=u[0].slice(n)),i>0&&u.push(e[o].slice(0,i))),u}function Dn(e,t){let r=-1;const n=[];let o;for(;++r<e.length;){const i=e[r];let u;if(typeof i=="string")u=i;else switch(i){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&o)continue;u=" ";break}default:u=String.fromCharCode(i)}o=i===-2,n.push(u)}return n.join("")}const qn={[42]:b,[43]:b,[45]:b,[48]:b,[49]:b,[50]:b,[51]:b,[52]:b,[53]:b,[54]:b,[55]:b,[56]:b,[57]:b,[62]:xn},Hn={[91]:mn},Qn={[-2]:H,[-1]:H,[32]:H},Un={[35]:gn,[42]:Q,[45]:[Z,Q],[60]:kn,[61]:Z,[95]:Q,[96]:nn,[126]:nn},Gn={[38]:rn,[92]:on},Jn={[-5]:U,[-4]:U,[-3]:U,[33]:wn,[38]:rn,[42]:J,[60]:[bn,Cn],[91]:vn,[92]:[_n,on],[93]:In,[95]:J,[96]:Sn},Kn={null:[J,Pn]},Vn={null:[42,95]},Wn={null:[]},Xn=Object.freeze(Object.defineProperty({__proto__:null,document:qn,contentInitial:Hn,flowInitial:Qn,flow:Un,string:Gn,text:Jn,insideSpan:Kn,attentionMarkers:Vn,disable:Wn},Symbol.toStringTag,{value:"Module"}));function oe(e={}){const t=fn([Xn].concat(e.extensions||[])),r={defined:[],lazy:{},constructs:t,content:n(zn),document:n(Tn),flow:n(jn),string:n(Ln),text:n($n)};return r;function n(o){return i;function i(u){return Nn(r,o,u)}}}const tn=/[\0\t\n\r]/g;function se(){let e=1,t="",r=!0,n;return o;function o(i,u,c){const f=[];let s,h,p,x,v;for(i=t+i.toString(u),p=0,t="",r&&(i.charCodeAt(0)===65279&&p++,r=void 0);p<i.length;){if(tn.lastIndex=p,s=tn.exec(i),x=s&&s.index!==void 0?s.index:i.length,v=i.charCodeAt(x),!s){t=i.slice(p);break}if(v===10&&p===x&&n)f.push(-3),n=void 0;else switch(n&&(f.push(-5),n=void 0),p<x&&(f.push(i.slice(p,x)),e+=x-p),v){case 0:{f.push(65533),e++;break}case 9:{for(h=Math.ceil(e/4)*4,f.push(-2);e++<h;)f.push(-1);break}case 10:{f.push(-4),e=1;break}default:n=!0,e=1}p=x+1}return c&&(n&&f.push(-5),t&&f.push(t),f.push(null)),f}}function ue(e){for(;!An(e););return e}export{oe as a,se as b,ue as p};
