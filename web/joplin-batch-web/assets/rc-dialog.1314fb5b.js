import{e as R,a as y,c as B}from"./@babel/runtime.77033aed.js";import{r as a,R as c}from"./react.bcb0ff15.js";import{m as ie,p as le,j as se,K as q,P as ce}from"./rc-util.9e22709c.js";import{c as T}from"./classnames.fcae7549.js";import{C as Z}from"./rc-motion.4d67ed75.js";function ue(e){var n=e.prefixCls,t=e.style,o=e.visible,r=e.maskProps,i=e.motionName;return a.exports.createElement(Z,{key:"mask",visible:o,motionName:i,leavedClassName:"".concat(n,"-mask-hidden")},function(l){var u=l.className,m=l.style;return a.exports.createElement("div",R({style:y(y({},m),t),className:T("".concat(n,"-mask"),u)},r))})}function F(e,n,t){var o=n;return!o&&t&&(o="".concat(e,"-").concat(t)),o}function G(e,n){var t=e["page".concat(n?"Y":"X","Offset")],o="scroll".concat(n?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[o],typeof t!="number"&&(t=r.body[o])}return t}function fe(e){var n=e.getBoundingClientRect(),t={left:n.left,top:n.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow;return t.left+=G(r),t.top+=G(r,!0),t}const de=a.exports.memo(function(e){var n=e.children;return n},function(e,n){var t=n.shouldUpdate;return!t});var J={width:0,height:0,overflow:"hidden",outline:"none"},me=c.forwardRef(function(e,n){var t=e.prefixCls,o=e.className,r=e.style,i=e.title,l=e.ariaId,u=e.footer,m=e.closable,b=e.closeIcon,s=e.onClose,x=e.children,v=e.bodyStyle,k=e.bodyProps,N=e.modalRender,g=e.onMouseDown,I=e.onMouseUp,D=e.holderRef,E=e.visible,P=e.forceRender,d=e.width,S=e.height,h=a.exports.useRef(),w=a.exports.useRef();c.useImperativeHandle(n,function(){return{focus:function(){var C;(C=h.current)===null||C===void 0||C.focus()},changeActive:function(C){var O=document,p=O.activeElement;C&&p===w.current?h.current.focus():!C&&p===h.current&&w.current.focus()}}});var _={};d!==void 0&&(_.width=d),S!==void 0&&(_.height=S);var $;u&&($=c.createElement("div",{className:"".concat(t,"-footer")},u));var V;i&&(V=c.createElement("div",{className:"".concat(t,"-header")},c.createElement("div",{className:"".concat(t,"-title"),id:l},i)));var U;m&&(U=c.createElement("button",{type:"button",onClick:s,"aria-label":"Close",className:"".concat(t,"-close")},b||c.createElement("span",{className:"".concat(t,"-close-x")})));var W=c.createElement("div",{className:"".concat(t,"-content")},U,V,c.createElement("div",R({className:"".concat(t,"-body"),style:v},k),x),$);return c.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?l:null,"aria-modal":"true",ref:D,style:y(y({},r),_),className:T(t,o),onMouseDown:g,onMouseUp:I},c.createElement("div",{tabIndex:0,ref:h,style:J,"aria-hidden":"true"}),c.createElement(de,{shouldUpdate:E||P},N?N(W):W),c.createElement("div",{tabIndex:0,ref:w,style:J,"aria-hidden":"true"}))}),ee=a.exports.forwardRef(function(e,n){var t=e.prefixCls,o=e.title,r=e.style,i=e.className,l=e.visible,u=e.forceRender,m=e.destroyOnClose,b=e.motionName,s=e.ariaId,x=e.onVisibleChanged,v=e.mousePosition,k=a.exports.useRef(),N=a.exports.useState(),g=B(N,2),I=g[0],D=g[1],E={};I&&(E.transformOrigin=I);function P(){var d=fe(k.current);D(v?"".concat(v.x-d.left,"px ").concat(v.y-d.top,"px"):"")}return a.exports.createElement(Z,{visible:l,onVisibleChanged:x,onAppearPrepare:P,onEnterPrepare:P,forceRender:u,motionName:b,removeOnLeave:m,ref:k},function(d,S){var h=d.className,w=d.style;return a.exports.createElement(me,R({},e,{ref:n,title:o,ariaId:s,prefixCls:t,holderRef:S,style:y(y(y({},w),r),E),className:T(i,h)}))})});ee.displayName="Content";function Q(e){var n=e.prefixCls,t=n===void 0?"rc-dialog":n,o=e.zIndex,r=e.visible,i=r===void 0?!1:r,l=e.keyboard,u=l===void 0?!0:l,m=e.focusTriggerAfterClose,b=m===void 0?!0:m,s=e.scrollLocker,x=e.wrapStyle,v=e.wrapClassName,k=e.wrapProps,N=e.onClose,g=e.afterClose,I=e.transitionName,D=e.animation,E=e.closable,P=E===void 0?!0:E,d=e.mask,S=d===void 0?!0:d,h=e.maskTransitionName,w=e.maskAnimation,_=e.maskClosable,$=_===void 0?!0:_,V=e.maskStyle,U=e.maskProps,W=e.rootClassName,M=a.exports.useRef(),C=a.exports.useRef(),O=a.exports.useRef(),p=a.exports.useState(i),H=B(p,2),K=H[0],X=H[1],te=ie();function ne(f){if(f){if(!se(C.current,document.activeElement)){var A;M.current=document.activeElement,(A=O.current)===null||A===void 0||A.focus()}}else{if(X(!1),S&&M.current&&b){try{M.current.focus({preventScroll:!0})}catch{}M.current=null}K&&(g==null||g())}}function z(f){N==null||N(f)}var L=a.exports.useRef(!1),j=a.exports.useRef(),ae=function(){clearTimeout(j.current),L.current=!0},oe=function(){j.current=setTimeout(function(){L.current=!1})},Y=null;$&&(Y=function(A){L.current?L.current=!1:C.current===A.target&&z(A)});function re(f){if(u&&f.keyCode===q.ESC){f.stopPropagation(),z(f);return}i&&f.keyCode===q.TAB&&O.current.changeActive(!f.shiftKey)}return a.exports.useEffect(function(){return i&&X(!0),function(){}},[i]),a.exports.useEffect(function(){return function(){clearTimeout(j.current)}},[]),a.exports.useEffect(function(){return K?(s==null||s.lock(),s==null?void 0:s.unLock):function(){}},[K,s]),a.exports.createElement("div",R({className:T("".concat(t,"-root"),W)},le(e,{data:!0})),a.exports.createElement(ue,{prefixCls:t,visible:S&&i,motionName:F(t,h,w),style:y({zIndex:o},V),maskProps:U}),a.exports.createElement("div",R({tabIndex:-1,onKeyDown:re,className:T("".concat(t,"-wrap"),v),ref:C,onClick:Y,style:y(y({zIndex:o},x),{},{display:K?null:"none"})},k),a.exports.createElement(ee,R({},e,{onMouseDown:ae,onMouseUp:oe,ref:O,closable:P,ariaId:te,prefixCls:t,visible:i,onClose:z,onVisibleChanged:ne,motionName:F(t,I,D)}))))}var ve=function(n){var t=n.visible,o=n.getContainer,r=n.forceRender,i=n.destroyOnClose,l=i===void 0?!1:i,u=n.afterClose,m=a.exports.useState(t),b=B(m,2),s=b[0],x=b[1];return a.exports.useEffect(function(){t&&x(!0)},[t]),o===!1?a.exports.createElement(Q,R({},n,{getOpenCount:function(){return 2}})):!r&&l&&!s?null:a.exports.createElement(ce,{visible:t,forceRender:r,getContainer:o},function(v){return a.exports.createElement(Q,R({},n,{destroyOnClose:l,afterClose:function(){u==null||u(),x(!1)}},v))})};ve.displayName="Dialog";export{ve as D};
