import{t as Ce}from"./mdast-util-to-string.fb536fe5.js";import{p as Re,a as He,b as Le}from"./micromark.74065510.js";import{d as ze}from"./micromark-util-decode-numeric-character-reference.a2285e6c.js";import{d as De}from"./micromark-util-decode-string.5840a04a.js";import{n as F}from"./micromark-util-normalize-identifier.d8c35b62.js";import{d as Oe}from"./decode-named-character-reference.0cf99f69.js";import{s as T}from"./unist-util-stringify-position.9bacc487.js";const B={}.hasOwnProperty,Ae=function(h,s,d){return typeof s!="string"&&(d=s,s=void 0),Pe(d)(Re(He(d).document().write(Le()(h,s,!0))))};function Pe(h={}){const s=N({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(V),autolinkProtocol:k,autolinkEmail:k,atxHeading:a(O),blockQuote:a(xe),characterEscape:k,characterReference:k,codeFenced:a(D),codeFencedFenceInfo:p,codeFencedFenceMeta:p,codeIndented:a(D,p),codeText:a(ye,p),codeTextData:k,data:k,codeFlowValue:k,definition:a(Se),definitionDestinationString:p,definitionLabelString:p,definitionTitleString:p,emphasis:a(be),hardBreakEscape:a(P),hardBreakTrailing:a(P),htmlFlow:a(M,p),htmlFlowData:k,htmlText:a(M,p),htmlTextData:k,image:a(we),label:p,link:a(V),listItem:a(Ie),listItemValue:j,listOrdered:a(Q,_),listUnordered:a(Q),paragraph:a(Te),reference:fe,referenceString:p,resourceDestinationString:p,resourceTitleString:p,setextHeading:a(O),strong:a(Ee),thematicBreak:a(Be)},exit:{atxHeading:c(),atxHeadingSequence:Z,autolink:c(),autolinkEmail:me,autolinkProtocol:ke,blockQuote:c(),characterEscapeValue:m,characterReferenceMarkerHexadecimal:z,characterReferenceMarkerNumeric:z,characterReferenceValue:ge,codeFenced:c(G),codeFencedFence:$,codeFencedFenceInfo:A,codeFencedFenceMeta:W,codeFlowValue:m,codeIndented:c(J),codeText:c(se),codeTextData:m,data:m,definition:c(),definitionDestinationString:Y,definitionLabelString:K,definitionTitleString:X,emphasis:c(),hardBreakEscape:c(L),hardBreakTrailing:c(L),htmlFlow:c(ie),htmlFlowData:m,htmlText:c(re),htmlTextData:m,image:c(ce),label:oe,labelText:le,lineEnding:ne,link:c(ae),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:pe,resourceDestinationString:de,resourceTitleString:he,resource:ue,setextHeading:c(te),setextHeadingLineSequence:ee,setextHeadingText:v,strong:c(),thematicBreak:c()}},h.mdastExtensions||[]),d={};return y;function y(e){let t={type:"root",children:[]};const n=[t],i=[],g=[],w={stack:n,tokenStack:i,config:s,enter:R,exit:H,buffer:p,resume:U,setData:o,getData:f};let r=-1;for(;++r<e.length;)if(e[r][1].type==="listOrdered"||e[r][1].type==="listUnordered")if(e[r][0]==="enter")g.push(r);else{const u=g.pop();r=C(e,u,r)}for(r=-1;++r<e.length;){const u=s[e[r][0]];B.call(u,e[r][1].type)&&u[e[r][1].type].call(Object.assign({sliceSerialize:e[r][2].sliceSerialize},w),e[r][1])}if(i.length>0){const u=i[i.length-1];(u[1]||q).call(w,void 0,u[0])}for(t.position={start:S(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:S(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},r=-1;++r<s.transforms.length;)t=s.transforms[r](t)||t;return t}function C(e,t,n){let i=t-1,g=-1,w=!1,r,u,b,I;for(;++i<=n;){const l=e[i];if(l[1].type==="listUnordered"||l[1].type==="listOrdered"||l[1].type==="blockQuote"?(l[0]==="enter"?g++:g--,I=void 0):l[1].type==="lineEndingBlank"?l[0]==="enter"&&(r&&!I&&!g&&!b&&(b=i),I=void 0):l[1].type==="linePrefix"||l[1].type==="listItemValue"||l[1].type==="listItemMarker"||l[1].type==="listItemPrefix"||l[1].type==="listItemPrefixWhitespace"||(I=void 0),!g&&l[0]==="enter"&&l[1].type==="listItemPrefix"||g===-1&&l[0]==="exit"&&(l[1].type==="listUnordered"||l[1].type==="listOrdered")){if(r){let E=i;for(u=void 0;E--;){const x=e[E];if(x[1].type==="lineEnding"||x[1].type==="lineEndingBlank"){if(x[0]==="exit")continue;u&&(e[u][1].type="lineEndingBlank",w=!0),x[1].type="lineEnding",u=E}else if(!(x[1].type==="linePrefix"||x[1].type==="blockQuotePrefix"||x[1].type==="blockQuotePrefixWhitespace"||x[1].type==="blockQuoteMarker"||x[1].type==="listItemIndent"))break}b&&(!u||b<u)&&(r._spread=!0),r.end=Object.assign({},u?e[u][1].start:l[1].end),e.splice(u||i,0,["exit",r,l[2]]),i++,n++}l[1].type==="listItemPrefix"&&(r={type:"listItem",_spread:!1,start:Object.assign({},l[1].start)},e.splice(i,0,["enter",r,l[2]]),i++,n++,b=void 0,I=!0)}}return e[t][1]._spread=w,n}function o(e,t){d[e]=t}function f(e){return d[e]}function S(e){return{line:e.line,column:e.column,offset:e.offset}}function a(e,t){return n;function n(i){R.call(this,e(i),i),t&&t.call(this,i)}}function p(){this.stack.push({type:"fragment",children:[]})}function R(e,t,n){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:S(t.start)},e}function c(e){return t;function t(n){e&&e.call(this,n),H.call(this,n)}}function H(e,t){const n=this.stack.pop(),i=this.tokenStack.pop();if(i)i[0].type!==e.type&&(t?t.call(this,e,i[0]):(i[1]||q).call(this,e,i[0]));else throw new Error("Cannot close `"+e.type+"` ("+T({start:e.start,end:e.end})+"): it\u2019s not open");return n.position.end=S(e.end),n}function U(){return Ce(this.stack.pop())}function _(){o("expectingFirstListItemValue",!0)}function j(e){if(f("expectingFirstListItemValue")){const t=this.stack[this.stack.length-2];t.start=Number.parseInt(this.sliceSerialize(e),10),o("expectingFirstListItemValue")}}function A(){const e=this.resume(),t=this.stack[this.stack.length-1];t.lang=e}function W(){const e=this.resume(),t=this.stack[this.stack.length-1];t.meta=e}function $(){f("flowCodeInside")||(this.buffer(),o("flowCodeInside",!0))}function G(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),o("flowCodeInside")}function J(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e.replace(/(\r?\n|\r)$/g,"")}function K(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=F(this.sliceSerialize(e)).toLowerCase()}function X(){const e=this.resume(),t=this.stack[this.stack.length-1];t.title=e}function Y(){const e=this.resume(),t=this.stack[this.stack.length-1];t.url=e}function Z(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function v(){o("setextHeadingSlurpLineEnding",!0)}function ee(e){const t=this.stack[this.stack.length-1];t.depth=this.sliceSerialize(e).charCodeAt(0)===61?1:2}function te(){o("setextHeadingSlurpLineEnding")}function k(e){const t=this.stack[this.stack.length-1];let n=t.children[t.children.length-1];(!n||n.type!=="text")&&(n=Fe(),n.position={start:S(e.start)},t.children.push(n)),this.stack.push(n)}function m(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=S(e.end)}function ne(e){const t=this.stack[this.stack.length-1];if(f("atHardBreak")){const n=t.children[t.children.length-1];n.position.end=S(e.end),o("atHardBreak");return}!f("setextHeadingSlurpLineEnding")&&s.canContainEols.includes(t.type)&&(k.call(this,e),m.call(this,e))}function L(){o("atHardBreak",!0)}function ie(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function re(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function se(){const e=this.resume(),t=this.stack[this.stack.length-1];t.value=e}function ae(){const e=this.stack[this.stack.length-1];f("inReference")?(e.type+="Reference",e.referenceType=f("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),o("referenceType")}function ce(){const e=this.stack[this.stack.length-1];f("inReference")?(e.type+="Reference",e.referenceType=f("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label),o("referenceType")}function le(e){const t=this.stack[this.stack.length-2],n=this.sliceSerialize(e);t.label=De(n),t.identifier=F(n).toLowerCase()}function oe(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];o("inReference",!0),n.type==="link"?n.children=e.children:n.alt=t}function de(){const e=this.resume(),t=this.stack[this.stack.length-1];t.url=e}function he(){const e=this.resume(),t=this.stack[this.stack.length-1];t.title=e}function ue(){o("inReference")}function fe(){o("referenceType","collapsed")}function pe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=F(this.sliceSerialize(e)).toLowerCase(),o("referenceType","full")}function z(e){o("characterReferenceType",e.type)}function ge(e){const t=this.sliceSerialize(e),n=f("characterReferenceType");let i;n?(i=ze(t,n==="characterReferenceMarkerNumeric"?10:16),o("characterReferenceType")):i=Oe(t);const g=this.stack.pop();g.value+=i,g.position.end=S(e.end)}function ke(e){m.call(this,e);const t=this.stack[this.stack.length-1];t.url=this.sliceSerialize(e)}function me(e){m.call(this,e);const t=this.stack[this.stack.length-1];t.url="mailto:"+this.sliceSerialize(e)}function xe(){return{type:"blockquote",children:[]}}function D(){return{type:"code",lang:null,meta:null,value:""}}function ye(){return{type:"inlineCode",value:""}}function Se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function be(){return{type:"emphasis",children:[]}}function O(){return{type:"heading",depth:void 0,children:[]}}function P(){return{type:"break"}}function M(){return{type:"html",value:""}}function we(){return{type:"image",title:null,url:"",alt:null}}function V(){return{type:"link",title:null,url:"",children:[]}}function Q(e){return{type:"list",ordered:e.type==="listOrdered",start:null,spread:e._spread,children:[]}}function Ie(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function Te(){return{type:"paragraph",children:[]}}function Ee(){return{type:"strong",children:[]}}function Fe(){return{type:"text",value:""}}function Be(){return{type:"thematicBreak"}}}function N(h,s){let d=-1;for(;++d<s.length;){const y=s[d];Array.isArray(y)?N(h,y):Me(h,y)}return h}function Me(h,s){let d;for(d in s)if(B.call(s,d)){const y=d==="canContainEols"||d==="transforms",o=(B.call(h,d)?h[d]:void 0)||(h[d]=y?[]:{}),f=s[d];f&&(y?h[d]=[...o,...f]:Object.assign(o,f))}}function q(h,s){throw h?new Error("Cannot close `"+h.type+"` ("+T({start:h.start,end:h.end})+"): a different token (`"+s.type+"`, "+T({start:s.start,end:s.end})+") is open"):new Error("Cannot close document, a token (`"+s.type+"`, "+T({start:s.start,end:s.end})+") is still open")}export{Ae as f};
