const Te=Symbol.for("yaml.alias"),je=Symbol.for("yaml.document"),P=Symbol.for("yaml.map"),tt=Symbol.for("yaml.pair"),he=Symbol.for("yaml.scalar"),v=Symbol.for("yaml.seq"),T=Symbol.for("yaml.node.type"),G=t=>!!t&&typeof t=="object"&&t[T]===Te,Be=t=>!!t&&typeof t=="object"&&t[T]===je,se=t=>!!t&&typeof t=="object"&&t[T]===P,I=t=>!!t&&typeof t=="object"&&t[T]===tt,N=t=>!!t&&typeof t=="object"&&t[T]===he,ie=t=>!!t&&typeof t=="object"&&t[T]===v;function A(t){if(t&&typeof t=="object")switch(t[T]){case P:case v:return!0}return!1}function j(t){if(t&&typeof t=="object")switch(t[T]){case Te:case P:case he:case v:return!0}return!1}const jt=t=>(N(t)||A(t))&&!!t.anchor;class Me{constructor(e){Object.defineProperty(this,T,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}}const D=Symbol("break visit"),kt=Symbol("skip children"),x=Symbol("remove node");function V(t,e){const n=Lt(e);Be(t)?q(null,t.contents,n,Object.freeze([t]))===x&&(t.contents=null):q(null,t,n,Object.freeze([]))}V.BREAK=D;V.SKIP=kt;V.REMOVE=x;function q(t,e,n,s){const i=Tt(t,e,n,s);if(j(i)||I(i))return Bt(t,s,i),q(t,i,n,s);if(typeof i!="symbol"){if(A(e)){s=Object.freeze(s.concat(e));for(let r=0;r<e.items.length;++r){const o=q(r,e.items[r],n,s);if(typeof o=="number")r=o-1;else{if(o===D)return D;o===x&&(e.items.splice(r,1),r-=1)}}}else if(I(e)){s=Object.freeze(s.concat(e));const r=q("key",e.key,n,s);if(r===D)return D;r===x&&(e.key=null);const o=q("value",e.value,n,s);if(o===D)return D;o===x&&(e.value=null)}}return i}function Lt(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Tt(t,e,n,s){var i,r,o,f,l;if(typeof n=="function")return n(t,e,s);if(se(e))return(i=n.Map)==null?void 0:i.call(n,t,e,s);if(ie(e))return(r=n.Seq)==null?void 0:r.call(n,t,e,s);if(I(e))return(o=n.Pair)==null?void 0:o.call(n,t,e,s);if(N(e))return(f=n.Scalar)==null?void 0:f.call(n,t,e,s);if(G(e))return(l=n.Alias)==null?void 0:l.call(n,t,e,s)}function Bt(t,e,n){const s=e[e.length-1];if(A(s))s.items[t]=n;else if(I(s))t==="key"?s.key=n:s.value=n;else if(Be(s))s.contents=n;else{const i=G(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const Mt={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Ct=t=>t.replace(/[!,[\]{}]/g,e=>Mt[e]);class k{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},k.defaultYaml,e),this.tags=Object.assign({},k.defaultTags,n)}clone(){const e=new k(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new k(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:k.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},k.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:k.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},k.defaultTags),this.atNextDocument=!1);const s=e.trim().split(/[ \t]+/),i=s.shift();switch(i){case"%TAG":{if(s.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[r,o]=s;return this.tags[r]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,s.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[r]=s;if(r==="1.1"||r==="1.2")return this.yaml.version=r,!0;{const o=/^\d+\.\d+$/.test(r);return n(6,`Unsupported YAML version ${r}`,o),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,s,i]=e.match(/^(.*!)([^!]*)$/);i||n(`The ${e} tag has no suffix`);const r=this.tags[s];return r?r+decodeURIComponent(i):s==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,s]of Object.entries(this.tags))if(e.startsWith(s))return n+Ct(e.substring(s.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let i;if(e&&s.length>0&&j(e.contents)){const r={};V(e.contents,(o,f)=>{j(f)&&f.tag&&(r[f.tag]=!0)}),i=Object.keys(r)}else i=[];for(const[r,o]of s)r==="!!"&&o==="tag:yaml.org,2002:"||(!e||i.some(f=>f.startsWith(o)))&&n.push(`%TAG ${r} ${o}`);return n.join(`
`)}}k.defaultYaml={explicit:!1,version:"1.2"};k.defaultTags={"!!":"tag:yaml.org,2002:"};function nt(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function st(t){const e=new Set;return V(t,{Value(n,s){s.anchor&&e.add(s.anchor)}}),e}function it(t,e){for(let n=1;;++n){const s=`${t}${n}`;if(!e.has(s))return s}}function _t(t,e){const n=[],s=new Map;let i=null;return{onAnchor:r=>{n.push(r),i||(i=st(t));const o=it(e,i);return i.add(o),o},setAnchors:()=>{for(const r of n){const o=s.get(r);if(typeof o=="object"&&o.anchor&&(N(o.node)||A(o.node)))o.node.anchor=o.anchor;else{const f=new Error("Failed to resolve repeated object (this should not happen)");throw f.source=r,f}}},sourceObjects:s}}class rt extends Me{constructor(e){super(Te),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return V(e,{Node:(s,i)=>{if(i===this)return V.BREAK;i.anchor===this.source&&(n=i)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:s,doc:i,maxAliasCount:r}=n,o=this.resolve(i);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}const f=s.get(o);if(!f||f.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(r>=0&&(f.count+=1,f.aliasCount===0&&(f.aliasCount=le(i,o,s)),f.count*f.aliasCount>r)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return f.res}toString(e,n,s){const i=`*${this.source}`;if(e){if(nt(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const r=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(r)}if(e.implicitKey)return`${i} `}return i}}function le(t,e,n){if(G(e)){const s=e.resolve(t),i=n&&s&&n.get(s);return i?i.count*i.aliasCount:0}else if(A(e)){let s=0;for(const i of e.items){const r=le(t,i,n);r>s&&(s=r)}return s}else if(I(e)){const s=le(t,e.key,n),i=le(t,e.value,n);return Math.max(s,i)}return 1}function M(t,e,n){if(Array.isArray(t))return t.map((s,i)=>M(s,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!jt(t))return t.toJSON(e,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(t,s),n.onCreate=r=>{s.res=r,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!(n!=null&&n.keep)?Number(t):t}const ot=t=>!t||typeof t!="function"&&typeof t!="object";class b extends Me{constructor(e){super(he),this.value=e}toJSON(e,n){return n!=null&&n.keep?this.value:M(this.value,e,n)}toString(){return String(this.value)}}b.BLOCK_FOLDED="BLOCK_FOLDED";b.BLOCK_LITERAL="BLOCK_LITERAL";b.PLAIN="PLAIN";b.QUOTE_DOUBLE="QUOTE_DOUBLE";b.QUOTE_SINGLE="QUOTE_SINGLE";const Ft="tag:yaml.org,2002:";function Pt(t,e,n){var s;if(e){const i=n.filter(o=>o.tag===e),r=(s=i.find(o=>!o.format))!=null?s:i[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(i=>{var r;return((r=i.identify)==null?void 0:r.call(i,t))&&!i.format})}function ne(t,e,n){var u,h;if(Be(t)&&(t=t.contents),j(t))return t;if(I(t)){const c=(h=(u=n.schema[P]).createNode)==null?void 0:h.call(u,n.schema,null,n);return c.items.push(t),c}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:s,onAnchor:i,onTagObj:r,schema:o,sourceObjects:f}=n;let l;if(s&&t&&typeof t=="object"){if(l=f.get(t),l)return l.anchor||(l.anchor=i(t)),new rt(l.anchor);l={anchor:null,node:null},f.set(t,l)}e!=null&&e.startsWith("!!")&&(e=Ft+e.slice(2));let a=Pt(t,e,o.tags);if(!a){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const c=new b(t);return l&&(l.node=c),c}a=t instanceof Map?o[P]:Symbol.iterator in Object(t)?o[v]:o[P]}r&&(r(a),delete n.onTagObj);const d=a!=null&&a.createNode?a.createNode(n.schema,t,n):new b(t);return e&&(d.tag=e),l&&(l.node=d),d}function ue(t,e,n){let s=n;for(let i=e.length-1;i>=0;--i){const r=e[i];if(typeof r=="number"&&Number.isInteger(r)&&r>=0){const o=[];o[r]=s,s=o}else s=new Map([[r,s]])}return ne(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const X=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class de extends Me{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(s=>j(s)||I(s)?s.clone(e):s),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(X(e))this.add(n);else{const[s,...i]=e,r=this.get(s,!0);if(A(r))r.addIn(i,n);else if(r===void 0&&this.schema)this.set(s,ue(this.schema,i,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}deleteIn(e){const[n,...s]=e;if(s.length===0)return this.delete(n);const i=this.get(n,!0);if(A(i))return i.deleteIn(s);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`)}getIn(e,n){const[s,...i]=e,r=this.get(s,!0);return i.length===0?!n&&N(r)?r.value:r:A(r)?r.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!I(n))return!1;const s=n.value;return s==null||e&&N(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[n,...s]=e;if(s.length===0)return this.has(n);const i=this.get(n,!0);return A(i)?i.hasIn(s):!1}setIn(e,n){const[s,...i]=e;if(i.length===0)this.set(s,n);else{const r=this.get(s,!0);if(A(r))r.setIn(i,n);else if(r===void 0&&this.schema)this.set(s,ue(this.schema,i,n));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${i}`)}}}de.maxFlowStringSingleLineLength=60;const Jt=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function C(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const F=(t,e,n)=>t.endsWith(`
`)?C(n,e):n.includes(`
`)?`
`+C(n,e):(t.endsWith(" ")?"":" ")+n,ft="flow",ke="block",ae="quoted";function ye(t,e,n="flow",{indentAtStart:s,lineWidth:i=80,minContentWidth:r=20,onFold:o,onOverflow:f}={}){if(!i||i<0)return t;const l=Math.max(1+r,1+i-e.length);if(t.length<=l)return t;const a=[],d={};let u=i-e.length;typeof s=="number"&&(s>i-Math.max(2,r)?a.push(0):u=i-s);let h,c,p=!1,g=-1,y=-1,O=-1;n===ke&&(g=ze(t,g),g!==-1&&(u=g+l));for(let w;w=t[g+=1];){if(n===ae&&w==="\\"){switch(y=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}O=g}if(w===`
`)n===ke&&(g=ze(t,g)),u=g+l,h=void 0;else{if(w===" "&&c&&c!==" "&&c!==`
`&&c!=="	"){const S=t[g+1];S&&S!==" "&&S!==`
`&&S!=="	"&&(h=g)}if(g>=u)if(h)a.push(h),u=h+l,h=void 0;else if(n===ae){for(;c===" "||c==="	";)c=w,w=t[g+=1],p=!0;const S=g>O+1?g-2:y-1;if(d[S])return t;a.push(S),d[S]=!0,u=S+l,h=void 0}else p=!0}c=w}if(p&&f&&f(),a.length===0)return t;o&&o();let m=t.slice(0,a[0]);for(let w=0;w<a.length;++w){const S=a[w],$=a[w+1]||t.length;S===0?m=`
${e}${t.slice(0,$)}`:(n===ae&&d[S]&&(m+=`${t[S]}\\`),m+=`
${e}${t.slice(S+1,$)}`)}return m}function ze(t,e){let n=t[e+1];for(;n===" "||n==="	";){do n=t[e+=1];while(n&&n!==`
`);n=t[e+1]}return e}const me=t=>({indentAtStart:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),pe=t=>/^(%|---|\.\.\.)/m.test(t);function Kt(t,e,n){if(!e||e<0)return!1;const s=e-n,i=t.length;if(i<=s)return!1;for(let r=0,o=0;r<i;++r)if(t[r]===`
`){if(r-o>s)return!0;if(o=r+1,i-o<=s)return!1}return!0}function ee(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=e,i=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(pe(t)?"  ":"");let o="",f=0;for(let l=0,a=n[l];a;a=n[++l])if(a===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(f,l)+"\\ ",l+=1,f=l,a="\\"),a==="\\")switch(n[l+1]){case"u":{o+=n.slice(f,l);const d=n.substr(l+2,4);switch(d){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:d.substr(0,2)==="00"?o+="\\x"+d.substr(2):o+=n.substr(l,6)}l+=5,f=l+1}break;case"n":if(s||n[l+2]==='"'||n.length<i)l+=1;else{for(o+=n.slice(f,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=r,n[l+2]===" "&&(o+="\\"),l+=1,f=l+1}break;default:l+=1}return o=f?o+n.slice(f):n,s?o:ye(o,r,ae,me(e))}function Le(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return ee(t,e);const n=e.indent||(pe(t)?"  ":""),s="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?s:ye(s,n,ft,me(e))}function te(t,e){const{singleQuote:n}=e.options;let s;if(n===!1)s=ee;else{const i=t.includes('"'),r=t.includes("'");i&&!r?s=Le:r&&!i?s=ee:s=n?Le:ee}return s(t,e)}function ce({comment:t,type:e,value:n},s,i,r){const{blockQuote:o,commentString:f,lineWidth:l}=s.options;if(!o||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return te(n,s);const a=s.indent||(s.forceBlockIndent||pe(n)?"  ":""),d=o==="literal"?!0:o==="folded"||e===b.BLOCK_FOLDED?!1:e===b.BLOCK_LITERAL?!0:!Kt(n,l,a.length);if(!n)return d?`|
`:`>
`;let u,h;for(h=n.length;h>0;--h){const E=n[h-1];if(E!==`
`&&E!=="	"&&E!==" ")break}let c=n.substring(h);const p=c.indexOf(`
`);p===-1?u="-":n===c||p!==c.length-1?(u="+",r&&r()):u="",c&&(n=n.slice(0,-c.length),c[c.length-1]===`
`&&(c=c.slice(0,-1)),c=c.replace(/\n+(?!\n|$)/g,`$&${a}`));let g=!1,y,O=-1;for(y=0;y<n.length;++y){const E=n[y];if(E===" ")g=!0;else if(E===`
`)O=y;else break}let m=n.substring(0,O<y?O+1:y);m&&(n=n.substring(m.length),m=m.replace(/\n+/g,`$&${a}`));let S=(d?"|":">")+(g?a?"2":"1":"")+u;if(t&&(S+=" "+f(t.replace(/ ?[\r\n]+/g," ")),i&&i()),d)return n=n.replace(/\n+/g,`$&${a}`),`${S}
${a}${m}${n}${c}`;n=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${a}`);const $=ye(`${m}${n}${c}`,a,ke,me(s));return`${S}
${a}${$}`}function Dt(t,e,n,s){const{type:i,value:r}=t,{actualString:o,implicitKey:f,indent:l,inFlow:a}=e;if(f&&/[\n[\]{},]/.test(r)||a&&/[[\]{},]/.test(r))return te(r,e);if(!r||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return f||a||!r.includes(`
`)?te(r,e):ce(t,e,n,s);if(!f&&!a&&i!==b.PLAIN&&r.includes(`
`))return ce(t,e,n,s);if(l===""&&pe(r))return e.forceBlockIndent=!0,ce(t,e,n,s);const d=r.replace(/\n+/g,`$&
${l}`);if(o){const u=p=>{var g;return p.default&&p.tag!=="tag:yaml.org,2002:str"&&((g=p.test)==null?void 0:g.test(d))},{compat:h,tags:c}=e.doc.schema;if(c.some(u)||(h==null?void 0:h.some(u)))return te(r,e)}return f?d:ye(d,l,ft,me(e))}function Ce(t,e,n,s){const{implicitKey:i,inFlow:r}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:f}=t;f!==b.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(f=b.QUOTE_DOUBLE);const l=d=>{switch(d){case b.BLOCK_FOLDED:case b.BLOCK_LITERAL:return i||r?te(o.value,e):ce(o,e,n,s);case b.QUOTE_DOUBLE:return ee(o.value,e);case b.QUOTE_SINGLE:return Le(o.value,e);case b.PLAIN:return Dt(o,e,n,s);default:return null}};let a=l(f);if(a===null){const{defaultKeyType:d,defaultStringType:u}=e.options,h=i&&d||u;if(a=l(h),a===null)throw new Error(`Unsupported default string type ${h}`)}return a}function lt(t,e){const n=Object.assign({blockQuote:!0,commentString:Jt,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function Ut(t,e){var i,r,o,f;if(e.tag){const l=t.filter(a=>a.tag===e.tag);if(l.length>0)return(i=l.find(a=>a.format===e.format))!=null?i:l[0]}let n,s;if(N(e)){s=e.value;const l=t.filter(a=>{var d;return(d=a.identify)==null?void 0:d.call(a,s)});n=(r=l.find(a=>a.format===e.format))!=null?r:l.find(a=>!a.format)}else s=e,n=t.find(l=>l.nodeClass&&s instanceof l.nodeClass);if(!n){const l=(f=(o=s==null?void 0:s.constructor)==null?void 0:o.name)!=null?f:typeof s;throw new Error(`Tag not resolved for ${l} value`)}return n}function Vt(t,e,{anchors:n,doc:s}){if(!s.directives)return"";const i=[],r=(N(t)||A(t))&&t.anchor;r&&nt(r)&&(n.add(r),i.push(`&${r}`));const o=t.tag?t.tag:e.default?null:e.tag;return o&&i.push(s.directives.tagString(o)),i.join(" ")}function R(t,e,n,s){var l,a;if(I(t))return t.toString(e,n,s);if(G(t)){if(e.doc.directives)return t.toString(e);if((l=e.resolvedAliases)!=null&&l.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const r=j(t)?t:e.doc.createNode(t,{onTagObj:d=>i=d});i||(i=Ut(e.doc.schema.tags,r));const o=Vt(r,i,e);o.length>0&&(e.indentAtStart=((a=e.indentAtStart)!=null?a:0)+o.length+1);const f=typeof i.stringify=="function"?i.stringify(r,e,n,s):N(r)?Ce(r,e,n,s):r.toString(e,n,s);return o?N(r)||f[0]==="{"||f[0]==="["?`${o} ${f}`:`${o}
${e.indent}${f}`:f}function Rt({key:t,value:e},n,s,i){var Qe,We;const{allNullValues:r,doc:o,indent:f,indentStep:l,options:{commentString:a,indentSeq:d,simpleKeys:u}}=n;let h=j(t)&&t.comment||null;if(u){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(A(t)){const J="With simple keys, collection cannot be used as a key value";throw new Error(J)}}let c=!u&&(!t||h&&e==null&&!n.inFlow||A(t)||(N(t)?t.type===b.BLOCK_FOLDED||t.type===b.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!c&&(u||!r),indent:f+l});let p=!1,g=!1,y=R(t,n,()=>p=!0,()=>g=!0);if(!c&&!n.inFlow&&y.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");c=!0}if(n.inFlow){if(r||e==null)return p&&s&&s(),y===""?"?":c?`? ${y}`:y}else if(r&&!u||e==null&&c)return y=`? ${y}`,h&&!p?y+=F(y,n.indent,a(h)):g&&i&&i(),y;p&&(h=null),c?(h&&(y+=F(y,n.indent,a(h))),y=`? ${y}
${f}:`):(y=`${y}:`,h&&(y+=F(y,n.indent,a(h))));let O,m,w;j(e)?(O=!!e.spaceBefore,m=e.commentBefore,w=e.comment):(O=!1,m=null,w=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!c&&!h&&N(e)&&(n.indentAtStart=y.length+1),g=!1,!d&&l.length>=2&&!n.inFlow&&!c&&ie(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let S=!1;const $=R(e,n,()=>S=!0,()=>g=!0);let E=" ";if(h||O||m){if(E=O?`
`:"",m){const J=a(m);E+=`
${C(J,n.indent)}`}$===""&&!n.inFlow?E===`
`&&(E=`

`):E+=`
${n.indent}`}else if(!c&&A(e)){const J=$[0],Ee=$.indexOf(`
`),ve=Ee!==-1,It=(We=(Qe=n.inFlow)!=null?Qe:e.flow)!=null?We:e.items.length===0;if(ve||!It){let Ge=!1;if(ve&&(J==="&"||J==="!")){let K=$.indexOf(" ");J==="&"&&K!==-1&&K<Ee&&$[K+1]==="!"&&(K=$.indexOf(" ",K+1)),(K===-1||Ee<K)&&(Ge=!0)}Ge||(E=`
${n.indent}`)}}else($===""||$[0]===`
`)&&(E="");return y+=E+$,n.inFlow?S&&s&&s():w&&!S?y+=F(y,n.indent,a(w)):g&&i&&i(),y}function Yt(t,e){(t==="debug"||t==="warn")&&(typeof process<"u"&&process.emitWarning?process.emitWarning(e):console.warn(e))}const He="<<";function at(t,e,{key:n,value:s}){if((t==null?void 0:t.doc.schema.merge)&&qt(n))if(s=G(s)?s.resolve(t.doc):s,ie(s))for(const i of s.items)Ae(t,e,i);else if(Array.isArray(s))for(const i of s)Ae(t,e,i);else Ae(t,e,s);else{const i=M(n,"",t);if(e instanceof Map)e.set(i,M(s,i,t));else if(e instanceof Set)e.add(i);else{const r=Qt(n,i,t),o=M(s,r,t);r in e?Object.defineProperty(e,r,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[r]=o}}return e}const qt=t=>t===He||N(t)&&t.value===He&&(!t.type||t.type===b.PLAIN);function Ae(t,e,n){const s=t&&G(n)?n.resolve(t.doc):n;if(!se(s))throw new Error("Merge sources must be maps or map aliases");const i=s.toJSON(null,t,Map);for(const[r,o]of i)e instanceof Map?e.has(r)||e.set(r,o):e instanceof Set?e.add(r):Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function Qt(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(j(t)&&n&&n.doc){const s=lt(n.doc,{});s.anchors=new Set;for(const r of n.anchors.keys())s.anchors.add(r.anchor);s.inFlow=!0,s.inStringifyKey=!0;const i=t.toString(s);if(!n.mapKeyWarned){let r=JSON.stringify(i);r.length>40&&(r=r.substring(0,36)+'..."'),Yt(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${r}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function _e(t,e,n){const s=ne(t,void 0,n),i=ne(e,void 0,n);return new L(s,i)}class L{constructor(e,n=null){Object.defineProperty(this,T,{value:tt}),this.key=e,this.value=n}clone(e){let{key:n,value:s}=this;return j(n)&&(n=n.clone(e)),j(s)&&(s=s.clone(e)),new L(n,s)}toJSON(e,n){const s=n!=null&&n.mapAsMap?new Map:{};return at(n,s,this)}toString(e,n,s){return e!=null&&e.doc?Rt(this,e,n,s):JSON.stringify(this)}}function ct(t,e,n){var r;return(((r=e.inFlow)!=null?r:t.flow)?vt:Wt)(t,e,n)}function Wt({comment:t,items:e},n,{blockItemPrefix:s,flowChars:i,itemIndent:r,onChompKeep:o,onComment:f}){const{indent:l,options:{commentString:a}}=n,d=Object.assign({},n,{indent:r,type:null});let u=!1;const h=[];for(let p=0;p<e.length;++p){const g=e[p];let y=null;if(j(g))!u&&g.spaceBefore&&h.push(""),ge(n,h,g.commentBefore,u),g.comment&&(y=g.comment);else if(I(g)){const m=j(g.key)?g.key:null;m&&(!u&&m.spaceBefore&&h.push(""),ge(n,h,m.commentBefore,u))}u=!1;let O=R(g,d,()=>y=null,()=>u=!0);y&&(O+=F(O,r,a(y))),u&&y&&(u=!1),h.push(s+O)}let c;if(h.length===0)c=i.start+i.end;else{c=h[0];for(let p=1;p<h.length;++p){const g=h[p];c+=g?`
${l}${g}`:`
`}}return t?(c+=`
`+C(a(t),l),f&&f()):u&&o&&o(),c}function vt({comment:t,items:e},n,{flowChars:s,itemIndent:i,onComment:r}){const{indent:o,indentStep:f,flowCollectionPadding:l,options:{commentString:a}}=n;i+=f;const d=Object.assign({},n,{indent:i,inFlow:!0,type:null});let u=!1,h=0;const c=[];for(let O=0;O<e.length;++O){const m=e[O];let w=null;if(j(m))m.spaceBefore&&c.push(""),ge(n,c,m.commentBefore,!1),m.comment&&(w=m.comment);else if(I(m)){const $=j(m.key)?m.key:null;$&&($.spaceBefore&&c.push(""),ge(n,c,$.commentBefore,!1),$.comment&&(u=!0));const E=j(m.value)?m.value:null;E?(E.comment&&(w=E.comment),E.commentBefore&&(u=!0)):m.value==null&&$&&$.comment&&(w=$.comment)}w&&(u=!0);let S=R(m,d,()=>w=null);O<e.length-1&&(S+=","),w&&(S+=F(S,i,a(w))),!u&&(c.length>h||S.includes(`
`))&&(u=!0),c.push(S),h=c.length}let p;const{start:g,end:y}=s;if(c.length===0)p=g+y;else if(u||(u=c.reduce((m,w)=>m+w.length+2,2)>de.maxFlowStringSingleLineLength),u){p=g;for(const O of c)p+=O?`
${f}${o}${O}`:`
`;p+=`
${o}${y}`}else p=`${g}${l}${c.join(" ")}${l}${y}`;return t&&(p+=F(p,a(t),o),r&&r()),p}function ge({indent:t,options:{commentString:e}},n,s,i){if(s&&i&&(s=s.replace(/^\n+/,"")),s){const r=C(e(s),t);n.push(r.trimStart())}}function U(t,e){const n=N(e)?e.value:e;for(const s of t)if(I(s)&&(s.key===e||s.key===n||N(s.key)&&s.key.value===n))return s}class _ extends de{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(P,e),this.items=[]}add(e,n){var o;let s;I(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new L(e,e==null?void 0:e.value):s=new L(e.key,e.value);const i=U(this.items,s.key),r=(o=this.schema)==null?void 0:o.sortMapEntries;if(i){if(!n)throw new Error(`Key ${s.key} already set`);N(i.value)&&ot(s.value)?i.value.value=s.value:i.value=s.value}else if(r){const f=this.items.findIndex(l=>r(s,l)<0);f===-1?this.items.push(s):this.items.splice(f,0,s)}else this.items.push(s)}delete(e){const n=U(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){var r;const s=U(this.items,e),i=s==null?void 0:s.value;return(r=!n&&N(i)?i.value:i)!=null?r:void 0}has(e){return!!U(this.items,e)}set(e,n){this.add(new L(e,n),!0)}toJSON(e,n,s){const i=s?new s:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(i);for(const r of this.items)at(n,i,r);return i}toString(e,n,s){if(!e)return JSON.stringify(this);for(const i of this.items)if(!I(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ct(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:n})}}function Gt(t,e,n){const{keepUndefined:s,replacer:i}=n,r=new _(t),o=(f,l)=>{if(typeof i=="function")l=i.call(e,f,l);else if(Array.isArray(i)&&!i.includes(f))return;(l!==void 0||s)&&r.items.push(_e(f,l,n))};if(e instanceof Map)for(const[f,l]of e)o(f,l);else if(e&&typeof e=="object")for(const f of Object.keys(e))o(f,e[f]);return typeof t.sortMapEntries=="function"&&r.items.sort(t.sortMapEntries),r}const z={collection:"map",createNode:Gt,default:!0,nodeClass:_,tag:"tag:yaml.org,2002:map",resolve(t,e){return se(t)||e("Expected a mapping for this tag"),t}};class be extends de{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(v,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=oe(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const s=oe(e);if(typeof s!="number")return;const i=this.items[s];return!n&&N(i)?i.value:i}has(e){const n=oe(e);return typeof n=="number"&&n<this.items.length}set(e,n){const s=oe(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[s];N(i)&&ot(n)?i.value=n:this.items[s]=n}toJSON(e,n){const s=[];n!=null&&n.onCreate&&n.onCreate(s);let i=0;for(const r of this.items)s.push(M(r,String(i++),n));return s}toString(e,n,s){return e?ct(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:n}):JSON.stringify(this)}}function oe(t){let e=N(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}function zt(t,e,n){const{replacer:s}=n,i=new be(t);if(e&&Symbol.iterator in Object(e)){let r=0;for(let o of e){if(typeof s=="function"){const f=e instanceof Set?o:String(r++);o=s.call(e,f,o)}i.items.push(ne(o,void 0,n))}}return i}const H={collection:"seq",createNode:zt,default:!0,nodeClass:be,tag:"tag:yaml.org,2002:seq",resolve(t,e){return ie(t)||e("Expected a sequence for this tag"),t}},we={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,s){return e=Object.assign({actualString:!0},e),Ce(t,e,n,s)}},Se={identify:t=>t==null,createNode:()=>new b(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new b(null),stringify:({source:t},e)=>typeof t=="string"&&Se.test.test(t)?t:e.options.nullStr},Fe={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new b(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&Fe.test.test(t)){const s=t[0]==="t"||t[0]==="T";if(e===s)return t}return e?n.options.trueStr:n.options.falseStr}};function B({format:t,minFractionDigits:e,tag:n,value:s}){if(typeof s=="bigint")return String(s);const i=typeof s=="number"?s:Number(s);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=JSON.stringify(s);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(r)){let o=r.indexOf(".");o<0&&(o=r.length,r+=".");let f=e-(r.length-o-1);for(;f-- >0;)r+="0"}return r}const ut={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:B},gt={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():B(t)}},ht={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new b(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:B},Oe=t=>typeof t=="bigint"||Number.isInteger(t),Pe=(t,e,n,{intAsBigInt:s})=>s?BigInt(t):parseInt(t.substring(e),n);function dt(t,e,n){const{value:s}=t;return Oe(s)&&s>=0?n+s.toString(e):B(t)}const yt={identify:t=>Oe(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Pe(t,2,8,n),stringify:t=>dt(t,8,"0o")},mt={identify:Oe,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Pe(t,0,10,n),stringify:B},pt={identify:t=>Oe(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Pe(t,2,16,n),stringify:t=>dt(t,16,"0x")},Ht=[z,H,we,Se,Fe,yt,mt,pt,ut,gt,ht];function Xe(t){return typeof t=="bigint"||Number.isInteger(t)}const fe=({value:t})=>JSON.stringify(t),Xt=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:fe},{identify:t=>t==null,createNode:()=>new b(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:fe},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>t==="true",stringify:fe},{identify:Xe,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Xe(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:fe}],Zt={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},xt=[z,H].concat(Xt,Zt),Je={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof Buffer=="function")return Buffer.from(t,"base64");if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},s,i,r){const o=n;let f;if(typeof Buffer=="function")f=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let a=0;a<o.length;++a)l+=String.fromCharCode(o[a]);f=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e||(e=b.BLOCK_LITERAL),e!==b.QUOTE_DOUBLE){const l=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),a=Math.ceil(f.length/l),d=new Array(a);for(let u=0,h=0;u<a;++u,h+=l)d[u]=f.substr(h,l);f=d.join(e===b.BLOCK_LITERAL?`
`:" ")}return Ce({comment:t,type:e,value:f},s,i,r)}};function bt(t,e){var n;if(ie(t))for(let s=0;s<t.items.length;++s){let i=t.items[s];if(!I(i)){if(se(i)){i.items.length>1&&e("Each pair must have its own sequence indicator");const r=i.items[0]||new L(new b(null));if(i.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${i.commentBefore}
${r.key.commentBefore}`:i.commentBefore),i.comment){const o=(n=r.value)!=null?n:r.key;o.comment=o.comment?`${i.comment}
${o.comment}`:i.comment}i=r}t.items[s]=I(i)?i:new L(i)}}else e("Expected a sequence for this tag");return t}function wt(t,e,n){const{replacer:s}=n,i=new be(t);i.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(r++),o));let f,l;if(Array.isArray(o))if(o.length===2)f=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const a=Object.keys(o);if(a.length===1)f=a[0],l=o[f];else throw new TypeError(`Expected { key: value } tuple: ${o}`)}else f=o;i.items.push(_e(f,l,n))}return i}const Ke={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:bt,createNode:wt};class Q extends be{constructor(){super(),this.add=_.prototype.add.bind(this),this.delete=_.prototype.delete.bind(this),this.get=_.prototype.get.bind(this),this.has=_.prototype.has.bind(this),this.set=_.prototype.set.bind(this),this.tag=Q.tag}toJSON(e,n){if(!n)return super.toJSON(e);const s=new Map;n!=null&&n.onCreate&&n.onCreate(s);for(const i of this.items){let r,o;if(I(i)?(r=M(i.key,"",n),o=M(i.value,r,n)):r=M(i,"",n),s.has(r))throw new Error("Ordered maps must not include duplicate keys");s.set(r,o)}return s}}Q.tag="tag:yaml.org,2002:omap";const De={collection:"seq",identify:t=>t instanceof Map,nodeClass:Q,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=bt(t,e),s=[];for(const{key:i}of n.items)N(i)&&(s.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):s.push(i.value));return Object.assign(new Q,n)},createNode(t,e,n){const s=wt(t,e,n),i=new Q;return i.items=s.items,i}};function St({value:t,source:e},n){return e&&(t?Ot:$t).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Ot={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new b(!0),stringify:St},$t={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new b(!1),stringify:St},en={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:B},tn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():B(t)}},nn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new b(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const s=t.substring(n+1).replace(/_/g,"");s[s.length-1]==="0"&&(e.minFractionDigits=s.length)}return e},stringify:B},re=t=>typeof t=="bigint"||Number.isInteger(t);function $e(t,e,n,{intAsBigInt:s}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),s){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return i==="-"?BigInt(-1)*o:o}const r=parseInt(t,n);return i==="-"?-1*r:r}function Ue(t,e,n){const{value:s}=t;if(re(s)){const i=s.toString(e);return s<0?"-"+n+i.substr(1):n+i}return B(t)}const sn={identify:re,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>$e(t,2,2,n),stringify:t=>Ue(t,2,"0b")},rn={identify:re,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>$e(t,1,8,n),stringify:t=>Ue(t,8,"0")},on={identify:re,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>$e(t,0,10,n),stringify:B},fn={identify:re,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>$e(t,2,16,n),stringify:t=>Ue(t,16,"0x")};class W extends _{constructor(e){super(e),this.tag=W.tag}add(e){let n;I(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new L(e.key,null):n=new L(e,null),U(this.items,n.key)||this.items.push(n)}get(e,n){const s=U(this.items,e);return!n&&I(s)?N(s.key)?s.key.value:s.key:s}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const s=U(this.items,e);s&&!n?this.items.splice(this.items.indexOf(s),1):!s&&n&&this.items.push(new L(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,s);throw new Error("Set items must all have null values")}}W.tag="tag:yaml.org,2002:set";const Ve={collection:"map",identify:t=>t instanceof Set,nodeClass:W,default:!1,tag:"tag:yaml.org,2002:set",resolve(t,e){if(se(t)){if(t.hasAllNullValues(!0))return Object.assign(new W,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t},createNode(t,e,n){const{replacer:s}=n,i=new W(t);if(e&&Symbol.iterator in Object(e))for(let r of e)typeof s=="function"&&(r=s.call(e,r,r)),i.items.push(_e(r,null,n));return i}};function Re(t,e){const n=t[0],s=n==="-"||n==="+"?t.substring(1):t,i=o=>e?BigInt(o):Number(o),r=s.replace(/_/g,"").split(":").reduce((o,f)=>o*i(60)+i(f),i(0));return n==="-"?i(-1)*r:r}function Nt(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return B(t);let s="";e<0&&(s="-",e*=n(-1));const i=n(60),r=[e%i];return e<60?r.unshift(0):(e=(e-r[0])/i,r.unshift(e%i),e>=60&&(e=(e-r[0])/i,r.unshift(e))),s+r.map(o=>o<10?"0"+String(o):String(o)).join(":").replace(/000000\d*$/,"")}const Et={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>Re(t,n),stringify:Nt},At={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Re(t,!1),stringify:Nt},Ne={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Ne.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,i,r,o,f]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let a=Date.UTC(n,s-1,i,r||0,o||0,f||0,l);const d=e[8];if(d&&d!=="Z"){let u=Re(d,!1);Math.abs(u)<30&&(u*=60),a-=6e4*u}return new Date(a)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Ze=[z,H,we,Se,Ot,$t,sn,rn,on,fn,en,tn,nn,Je,De,Ke,Ve,Et,At,Ne],xe=new Map([["core",Ht],["failsafe",[z,H,we]],["json",xt],["yaml11",Ze],["yaml-1.1",Ze]]),et={binary:Je,bool:Fe,float:ht,floatExp:gt,floatNaN:ut,floatTime:At,int:mt,intHex:pt,intOct:yt,intTime:Et,map:z,null:Se,omap:De,pairs:Ke,seq:H,set:Ve,timestamp:Ne},ln={"tag:yaml.org,2002:binary":Je,"tag:yaml.org,2002:omap":De,"tag:yaml.org,2002:pairs":Ke,"tag:yaml.org,2002:set":Ve,"tag:yaml.org,2002:timestamp":Ne};function Ie(t,e){let n=xe.get(e);if(!n)if(Array.isArray(t))n=[];else{const s=Array.from(xe.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(t))for(const s of t)n=n.concat(s);else typeof t=="function"&&(n=t(n.slice()));return n.map(s=>{if(typeof s!="string")return s;const i=et[s];if(i)return i;const r=Object.keys(et).map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown custom tag "${s}"; use one of ${r}`)})}const an=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Ye{constructor({compat:e,customTags:n,merge:s,resolveKnownTags:i,schema:r,sortMapEntries:o,toStringDefaults:f}){this.compat=Array.isArray(e)?Ie(e,"compat"):e?Ie(null,e):null,this.merge=!!s,this.name=typeof r=="string"&&r||"core",this.knownTags=i?ln:{},this.tags=Ie(n,this.name),this.toStringOptions=f!=null?f:null,Object.defineProperty(this,P,{value:z}),Object.defineProperty(this,he,{value:we}),Object.defineProperty(this,v,{value:H}),this.sortMapEntries=typeof o=="function"?o:o===!0?an:null}clone(){const e=Object.create(Ye.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function cn(t,e){var l;const n=[];let s=e.directives===!0;if(e.directives!==!1&&t.directives){const a=t.directives.toString(t);a?(n.push(a),s=!0):t.directives.docStart&&(s=!0)}s&&n.push("---");const i=lt(t,e),{commentString:r}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const a=r(t.commentBefore);n.unshift(C(a,""))}let o=!1,f=null;if(t.contents){if(j(t.contents)){if(t.contents.spaceBefore&&s&&n.push(""),t.contents.commentBefore){const u=r(t.contents.commentBefore);n.push(C(u,""))}i.forceBlockIndent=!!t.comment,f=t.contents.comment}const a=f?void 0:()=>o=!0;let d=R(t.contents,i,()=>f=null,a);f&&(d+=F(d,"",r(f))),(d[0]==="|"||d[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${d}`:n.push(d)}else n.push(R(t.contents,i));if((l=t.directives)!=null&&l.docEnd)if(t.comment){const a=r(t.comment);a.includes(`
`)?(n.push("..."),n.push(C(a,""))):n.push(`... ${a}`)}else n.push("...");else{let a=t.comment;a&&o&&(a=a.replace(/^\n+/,"")),a&&((!o||f)&&n[n.length-1]!==""&&n.push(""),n.push(C(r(a),"")))}return n.join(`
`)+`
`}function Z(t,e,n,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let i=0,r=s.length;i<r;++i){const o=s[i],f=Z(t,s,String(i),o);f===void 0?delete s[i]:f!==o&&(s[i]=f)}else if(s instanceof Map)for(const i of Array.from(s.keys())){const r=s.get(i),o=Z(t,s,i,r);o===void 0?s.delete(i):o!==r&&s.set(i,o)}else if(s instanceof Set)for(const i of Array.from(s)){const r=Z(t,s,i,i);r===void 0?s.delete(i):r!==i&&(s.delete(i),s.add(r))}else for(const[i,r]of Object.entries(s)){const o=Z(t,s,i,r);o===void 0?delete s[i]:o!==r&&(s[i]=o)}return t.call(e,n,s)}class qe{constructor(e,n,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,T,{value:je});let i=null;typeof n=="function"||Array.isArray(n)?i=n:s===void 0&&n&&(s=n,n=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},s);this.options=r;let{version:o}=r;s!=null&&s._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new k({version:o}),this.setSchema(o,s),e===void 0?this.contents=null:this.contents=this.createNode(e,i,s)}clone(){const e=Object.create(qe.prototype,{[T]:{value:je}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=j(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Y(this.contents)&&this.contents.add(e)}addIn(e,n){Y(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const s=st(this);e.anchor=!n||s.has(n)?it(n||"a",s):n}return new rt(e.anchor)}createNode(e,n,s){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const y=m=>typeof m=="number"||m instanceof String||m instanceof Number,O=n.filter(y).map(String);O.length>0&&(n=n.concat(O)),i=n}else s===void 0&&n&&(s=n,n=void 0);const{aliasDuplicateObjects:r,anchorPrefix:o,flow:f,keepUndefined:l,onTagObj:a,tag:d}=s!=null?s:{},{onAnchor:u,setAnchors:h,sourceObjects:c}=_t(this,o||"a"),p={aliasDuplicateObjects:r!=null?r:!0,keepUndefined:l!=null?l:!1,onAnchor:u,onTagObj:a,replacer:i,schema:this.schema,sourceObjects:c},g=ne(e,d,p);return f&&A(g)&&(g.flow=!0),h(),g}createPair(e,n,s={}){const i=this.createNode(e,null,s),r=this.createNode(n,null,s);return new L(i,r)}delete(e){return Y(this.contents)?this.contents.delete(e):!1}deleteIn(e){return X(e)?this.contents==null?!1:(this.contents=null,!0):Y(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return A(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return X(e)?!n&&N(this.contents)?this.contents.value:this.contents:A(this.contents)?this.contents.getIn(e,n):void 0}has(e){return A(this.contents)?this.contents.has(e):!1}hasIn(e){return X(e)?this.contents!==void 0:A(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=ue(this.schema,[e],n):Y(this.contents)&&this.contents.set(e,n)}setIn(e,n){X(e)?this.contents=n:this.contents==null?this.contents=ue(this.schema,Array.from(e),n):Y(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let s;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new k({version:"1.1"}),s={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new k({version:e}),s={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(s)this.schema=new Ye(Object.assign(s,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:s,maxAliasCount:i,onAnchor:r,reviver:o}={}){const f={anchors:new Map,doc:this,keep:!e,mapAsMap:s===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100,stringify:R},l=M(this.contents,n!=null?n:"",f);if(typeof r=="function")for(const{count:a,res:d}of f.anchors.values())r(d,a);return typeof o=="function"?Z(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return cn(this,e)}}function Y(t){if(A(t))return!0;throw new Error("Expected a YAML collection as document contents")}function un(t,e,n){var i;let s=null;if(typeof e=="function"||Array.isArray(e)?s=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const r=Math.round(n);n=r<1?void 0:r>8?{indent:8}:{indent:r}}if(t===void 0){const{keepUndefined:r}=(i=n!=null?n:e)!=null?i:{};if(!r)return}return new qe(t,s,n).toString(n)}export{un as s};
