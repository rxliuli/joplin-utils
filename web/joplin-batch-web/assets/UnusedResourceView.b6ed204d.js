import{ak as bt,ah as Pt,i as st,af as Vt,ag as Wt,r as a,w as De,aq as Ht,ap as jt,j as Ne,c as b,d as C,ar as Gt,k as St,h as S,e as q,R as j,as as Zt,at as Bt,K as Ae,f as ie,_ as Ve,n as Rt,au as we,A as je,s as Xt,av as Yt,aw as Kt,C as Et,p as We,X as lt,ax as Ft,ay as He,az as qt,aA as ct,x as ce,B as Jt,aB as Qt,aC as er}from"./index.f1f5c4e7.js";import{A as kt,a as tr}from"./index.ed2f3d4d.js";import{P as rr}from"./PromiseUtil.6594af2c.js";import{p as nr}from"./immer.esm.1670cf87.js";import{C as or}from"./index.36ffe889.js";import{S as ar}from"./index.44f8de98.js";import{B as Te}from"./button.0bd9609f.js";import{L as qe}from"./index.06e4778b.js";import{E as ir}from"./EyeOutlined.36dd0498.js";var Je;function Nt(t){if(typeof document>"u")return 0;if(t||Je===void 0){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var o=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;o===i&&(i=n.clientWidth),document.body.removeChild(n),Je=o-i}return Je}function ye(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t)return{};var n=e.element,r=n===void 0?document.body:n,o={},i=Object.keys(t);return i.forEach(function(s){o[s]=r.style[s]}),i.forEach(function(s){r.style[s]=t[s]}),o}function sr(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Qe={};const ut=function(t){if(!(!sr()&&!t)){var e="ant-scrolling-effect",n=new RegExp("".concat(e),"g"),r=document.body.className;if(t){if(!n.test(r))return;ye(Qe),Qe={},document.body.className=r.replace(n,"").trim();return}var o=Nt();if(o&&(Qe=ye({position:"relative",width:"calc(100% - ".concat(o,"px)")}),!n.test(r))){var i="".concat(r," ").concat(e);document.body.className=i.trim()}}};var lr=0,F=[],Ot="ant-scrolling-effect",et=new RegExp("".concat(Ot),"g"),tt=new Map,cr=bt(function t(e){var n=this;Pt(this,t),this.lockTarget=void 0,this.options=void 0,this.getContainer=function(){var r;return(r=n.options)===null||r===void 0?void 0:r.container},this.reLock=function(r){var o=F.find(function(i){var s=i.target;return s===n.lockTarget});o&&n.unLock(),n.options=r,o&&(o.options=r,n.lock())},this.lock=function(){var r;if(!F.some(function(u){var f=u.target;return f===n.lockTarget})){if(F.some(function(u){var f,l=u.options;return(l==null?void 0:l.container)===((f=n.options)===null||f===void 0?void 0:f.container)})){F=[].concat(st(F),[{target:n.lockTarget,options:n.options}]);return}var o=0,i=((r=n.options)===null||r===void 0?void 0:r.container)||document.body;(i===document.body&&window.innerWidth-document.documentElement.clientWidth>0||i.scrollHeight>i.clientHeight)&&(o=Nt());var s=i.className;if(F.filter(function(u){var f,l=u.options;return(l==null?void 0:l.container)===((f=n.options)===null||f===void 0?void 0:f.container)}).length===0&&tt.set(i,ye({width:o!==0?"calc(100% - ".concat(o,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:i})),!et.test(s)){var c="".concat(s," ").concat(Ot);i.className=c.trim()}F=[].concat(st(F),[{target:n.lockTarget,options:n.options}])}},this.unLock=function(){var r,o=F.find(function(c){var u=c.target;return u===n.lockTarget});if(F=F.filter(function(c){var u=c.target;return u!==n.lockTarget}),!(!o||F.some(function(c){var u,f=c.options;return(f==null?void 0:f.container)===((u=o.options)===null||u===void 0?void 0:u.container)}))){var i=((r=n.options)===null||r===void 0?void 0:r.container)||document.body,s=i.className;!et.test(s)||(ye(tt.get(i),{element:i}),tt.delete(i),i.className=i.className.replace(et,"").trim())}},this.lockTarget=lr++,this.options=e}),ae=0,ke=jt(),Ue={},xe=function(e){if(!ke)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(Ne(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body},ur=function(t){Vt(n,t);var e=Wt(n);function n(r){var o;return Pt(this,n),o=e.call(this,r),o.container=void 0,o.componentRef=a.exports.createRef(),o.rafId=void 0,o.scrollLocker=void 0,o.renderComponent=void 0,o.updateScrollLocker=function(i){var s=i||{},c=s.visible,u=o.props,f=u.getContainer,l=u.visible;l&&l!==c&&ke&&xe(f)!==o.scrollLocker.getContainer()&&o.scrollLocker.reLock({container:xe(f)})},o.updateOpenCount=function(i){var s=i||{},c=s.visible,u=s.getContainer,f=o.props,l=f.visible,v=f.getContainer;l!==c&&ke&&xe(v)===document.body&&(l&&!c?ae+=1:i&&(ae-=1));var g=typeof v=="function"&&typeof u=="function";(g?v.toString()!==u.toString():v!==u)&&o.removeCurrentContainer()},o.attachToParent=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(i||o.container&&!o.container.parentNode){var s=xe(o.props.getContainer);return s?(s.appendChild(o.container),!0):!1}return!0},o.getContainer=function(){return ke?(o.container||(o.container=document.createElement("div"),o.attachToParent(!0)),o.setWrapperClassName(),o.container):null},o.setWrapperClassName=function(){var i=o.props.wrapperClassName;o.container&&i&&i!==o.container.className&&(o.container.className=i)},o.removeCurrentContainer=function(){var i,s;(i=o.container)===null||i===void 0||(s=i.parentNode)===null||s===void 0||s.removeChild(o.container)},o.switchScrollingEffect=function(){ae===1&&!Object.keys(Ue).length?(ut(),Ue=ye({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):ae||(ye(Ue),Ue={},ut(!0))},o.scrollLocker=new cr({container:xe(r.getContainer)}),o}return bt(n,[{key:"componentDidMount",value:function(){var o=this;this.updateOpenCount(),this.attachToParent()||(this.rafId=De(function(){o.forceUpdate()}))}},{key:"componentDidUpdate",value:function(o){this.updateOpenCount(o),this.updateScrollLocker(o),this.setWrapperClassName(),this.attachToParent()}},{key:"componentWillUnmount",value:function(){var o=this.props,i=o.visible,s=o.getContainer;ke&&xe(s)===document.body&&(ae=i&&ae?ae-1:ae),this.removeCurrentContainer(),De.cancel(this.rafId)}},{key:"render",value:function(){var o=this.props,i=o.children,s=o.forceRender,c=o.visible,u=null,f={getOpenCount:function(){return ae},getContainer:this.getContainer,switchScrollingEffect:this.switchScrollingEffect,scrollLocker:this.scrollLocker};return(s||c||this.componentRef.current)&&(u=a.exports.createElement(Ht,{getContainer:this.getContainer,ref:this.componentRef},i(f))),u}}]),n}(a.exports.Component);function fr(){var t=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:e}}function dr(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}function vr(){var t=C({},Gt);return t.useId}var ft=0;function mr(t){var e=a.exports.useState("ssr-id"),n=b(e,2),r=n[0],o=n[1],i=vr(),s=i==null?void 0:i();return a.exports.useEffect(function(){if(!i){var c=ft;ft+=1,o("rc_unique_".concat(c))}},[]),t||s||r}function pr(t){var e=t.prefixCls,n=t.style,r=t.visible,o=t.maskProps,i=t.motionName;return a.exports.createElement(St,{key:"mask",visible:r,motionName:i,leavedClassName:"".concat(e,"-mask-hidden")},function(s){var c=s.className,u=s.style;return a.exports.createElement("div",S({style:C(C({},u),n),className:q("".concat(e,"-mask"),c)},o))})}function dt(t,e,n){var r=e;return!r&&n&&(r="".concat(t,"-").concat(n)),r}function vt(t,e){var n=t["page".concat(e?"Y":"X","Offset")],r="scroll".concat(e?"Top":"Left");if(typeof n!="number"){var o=t.document;n=o.documentElement[r],typeof n!="number"&&(n=o.body[r])}return n}function gr(t){var e=t.getBoundingClientRect(),n={left:e.left,top:e.top},r=t.ownerDocument,o=r.defaultView||r.parentWindow;return n.left+=vt(o),n.top+=vt(o,!0),n}const hr=a.exports.memo(function(t){var e=t.children;return e},function(t,e){var n=e.shouldUpdate;return!n});var mt={width:0,height:0,overflow:"hidden",outline:"none"},Cr=j.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,o=t.style,i=t.title,s=t.ariaId,c=t.footer,u=t.closable,f=t.closeIcon,l=t.onClose,v=t.children,g=t.bodyStyle,R=t.bodyProps,P=t.modalRender,E=t.onMouseDown,_=t.onMouseUp,G=t.holderRef,M=t.visible,V=t.forceRender,N=t.width,L=t.height,w=a.exports.useRef(),k=a.exports.useRef();j.useImperativeHandle(e,function(){return{focus:function(){var h;(h=w.current)===null||h===void 0||h.focus()},changeActive:function(h){var O=document,D=O.activeElement;h&&D===k.current?w.current.focus():!h&&D===w.current&&k.current.focus()}}});var Z={};N!==void 0&&(Z.width=N),L!==void 0&&(Z.height=L);var B;c&&(B=j.createElement("div",{className:"".concat(n,"-footer")},c));var X;i&&(X=j.createElement("div",{className:"".concat(n,"-header")},j.createElement("div",{className:"".concat(n,"-title"),id:s},i)));var U;u&&(U=j.createElement("button",{type:"button",onClick:l,"aria-label":"Close",className:"".concat(n,"-close")},f||j.createElement("span",{className:"".concat(n,"-close-x")})));var te=j.createElement("div",{className:"".concat(n,"-content")},U,X,j.createElement("div",S({className:"".concat(n,"-body"),style:g},R),v),B);return j.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?s:null,"aria-modal":"true",ref:G,style:C(C({},o),Z),className:q(n,r),onMouseDown:E,onMouseUp:_},j.createElement("div",{tabIndex:0,ref:w,style:mt,"aria-hidden":"true"}),j.createElement(hr,{shouldUpdate:M||V},P?P(te):te),j.createElement("div",{tabIndex:0,ref:k,style:mt,"aria-hidden":"true"}))}),_t=a.exports.forwardRef(function(t,e){var n=t.prefixCls,r=t.title,o=t.style,i=t.className,s=t.visible,c=t.forceRender,u=t.destroyOnClose,f=t.motionName,l=t.ariaId,v=t.onVisibleChanged,g=t.mousePosition,R=a.exports.useRef(),P=a.exports.useState(),E=b(P,2),_=E[0],G=E[1],M={};_&&(M.transformOrigin=_);function V(){var N=gr(R.current);G(g?"".concat(g.x-N.left,"px ").concat(g.y-N.top,"px"):"")}return a.exports.createElement(St,{visible:s,onVisibleChanged:v,onAppearPrepare:V,onEnterPrepare:V,forceRender:c,motionName:f,removeOnLeave:u,ref:R},function(N,L){var w=N.className,k=N.style;return a.exports.createElement(Cr,S({},t,{ref:e,title:r,ariaId:l,prefixCls:n,holderRef:L,style:C(C(C({},k),o),M),className:q(i,w)}))})});_t.displayName="Content";function pt(t){var e=t.prefixCls,n=e===void 0?"rc-dialog":e,r=t.zIndex,o=t.visible,i=o===void 0?!1:o,s=t.keyboard,c=s===void 0?!0:s,u=t.focusTriggerAfterClose,f=u===void 0?!0:u,l=t.scrollLocker,v=t.wrapStyle,g=t.wrapClassName,R=t.wrapProps,P=t.onClose,E=t.afterClose,_=t.transitionName,G=t.animation,M=t.closable,V=M===void 0?!0:M,N=t.mask,L=N===void 0?!0:N,w=t.maskTransitionName,k=t.maskAnimation,Z=t.maskClosable,B=Z===void 0?!0:Z,X=t.maskStyle,U=t.maskProps,te=t.rootClassName,z=a.exports.useRef(),h=a.exports.useRef(),O=a.exports.useRef(),D=a.exports.useState(i),y=b(D,2),Y=y[0],J=y[1],W=mr();function ne(m){if(m){if(!Bt(h.current,document.activeElement)){var H;z.current=document.activeElement,(H=O.current)===null||H===void 0||H.focus()}}else{if(J(!1),L&&z.current&&f){try{z.current.focus({preventScroll:!0})}catch{}z.current=null}Y&&(E==null||E())}}function $(m){P==null||P(m)}var A=a.exports.useRef(!1),re=a.exports.useRef(),oe=function(){clearTimeout(re.current),A.current=!0},T=function(){re.current=setTimeout(function(){A.current=!1})},x=null;B&&(x=function(H){A.current?A.current=!1:h.current===H.target&&$(H)});function I(m){if(c&&m.keyCode===Ae.ESC){m.stopPropagation(),$(m);return}i&&m.keyCode===Ae.TAB&&O.current.changeActive(!m.shiftKey)}return a.exports.useEffect(function(){return i&&J(!0),function(){}},[i]),a.exports.useEffect(function(){return function(){clearTimeout(re.current)}},[]),a.exports.useEffect(function(){return Y?(l==null||l.lock(),l==null?void 0:l.unLock):function(){}},[Y,l]),a.exports.createElement("div",S({className:q("".concat(n,"-root"),te)},Zt(t,{data:!0})),a.exports.createElement(pr,{prefixCls:n,visible:L&&i,motionName:dt(n,w,k),style:C({zIndex:r},X),maskProps:U}),a.exports.createElement("div",S({tabIndex:-1,onKeyDown:I,className:q("".concat(n,"-wrap"),g),ref:h,onClick:x,style:C(C({zIndex:r},v),{},{display:Y?null:"none"})},R),a.exports.createElement(_t,S({},t,{onMouseDown:oe,onMouseUp:T,ref:O,closable:V,ariaId:W,prefixCls:n,visible:i,onClose:$,onVisibleChanged:ne,motionName:dt(n,_,G)}))))}var It=function(e){var n=e.visible,r=e.getContainer,o=e.forceRender,i=e.destroyOnClose,s=i===void 0?!1:i,c=e.afterClose,u=a.exports.useState(n),f=b(u,2),l=f[0],v=f[1];return a.exports.useEffect(function(){n&&v(!0)},[n]),r===!1?a.exports.createElement(pt,S({},e,{getOpenCount:function(){return 2}})):!o&&s&&!l?null:a.exports.createElement(ur,{visible:n,forceRender:o,getContainer:r},function(g){return a.exports.createElement(pt,S({},e,{destroyOnClose:s,afterClose:function(){c==null||c(),v(!1)}},g))})};It.displayName="Dialog";function wr(t){var e=a.exports.useRef(null),n=a.exports.useState(t),r=b(n,2),o=r[0],i=r[1],s=a.exports.useRef([]),c=function(f){e.current===null&&(s.current=[],e.current=De(function(){i(function(l){var v=l;return s.current.forEach(function(g){v=C(C({},v),g)}),e.current=null,v})})),s.current.push(f)};return a.exports.useEffect(function(){return function(){return e.current&&De.cancel(e.current)}},[]),[o,c]}function gt(t,e,n,r){var o=e+n,i=(n-r)/2;if(n>r){if(e>0)return ie({},t,i);if(e<0&&o<r)return ie({},t,-i)}else if(e<0||o>r)return ie({},t,e<0?i:-i);return{}}function xr(t,e,n,r){var o=fr(),i=o.width,s=o.height,c=null;return t<=i&&e<=s?c={x:0,y:0}:(t>i||e>s)&&(c=C(C({},gt("x",n,t,i)),gt("y",r,e,s))),c}var yr=["visible","onVisibleChange","getContainer","current","countRender"],rt=a.exports.createContext({previewUrls:new Map,setPreviewUrls:function(){return null},current:null,setCurrent:function(){return null},setShowPreview:function(){return null},setMousePosition:function(){return null},registerImage:function(){return function(){return null}},rootClassName:""}),br=rt.Provider,Pr=function(e){var n=e.previewPrefixCls,r=n===void 0?"rc-image-preview":n,o=e.children,i=e.icons,s=i===void 0?{}:i,c=e.preview,u=Ne(c)==="object"?c:{},f=u.visible,l=f===void 0?void 0:f,v=u.onVisibleChange,g=v===void 0?void 0:v,R=u.getContainer,P=R===void 0?void 0:R,E=u.current,_=E===void 0?0:E,G=u.countRender,M=G===void 0?void 0:G,V=Ve(u,yr),N=a.exports.useState(new Map),L=b(N,2),w=L[0],k=L[1],Z=a.exports.useState(),B=b(Z,2),X=B[0],U=B[1],te=Rt(!!l,{value:l,onChange:g}),z=b(te,2),h=z[0],O=z[1],D=a.exports.useState(null),y=b(D,2),Y=y[0],J=y[1],W=l!==void 0,ne=Array.from(w.keys()),$=ne[_],A=new Map(Array.from(w).filter(function(T){var x=b(T,2),I=x[1].canPreview;return!!I}).map(function(T){var x=b(T,2),I=x[0],m=x[1].url;return[I,m]})),re=function(x,I){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,H=function(){k(function(ue){var se=new Map(ue),fe=se.delete(x);return fe?se:ue})};return k(function(Q){return new Map(Q).set(x,{url:I,canPreview:m})}),H},oe=function(x){x.stopPropagation(),O(!1),J(null)};return a.exports.useEffect(function(){U($)},[$]),a.exports.useEffect(function(){!h&&W&&U($)},[$,W,h]),a.exports.createElement(br,{value:{isPreviewGroup:!0,previewUrls:A,setPreviewUrls:k,current:X,setCurrent:U,setShowPreview:O,setMousePosition:J,registerImage:re}},o,a.exports.createElement(Mt,S({"aria-hidden":!h,visible:h,prefixCls:r,onClose:oe,mousePosition:Y,src:A.get(X),icons:s,getContainer:P,countRender:M},V)))},Sr=["prefixCls","src","alt","onClose","afterClose","visible","icons","rootClassName","countRender"],ze=a.exports.useState,ht=a.exports.useEffect,Rr=a.exports.useCallback,Ct=a.exports.useRef,Er=a.exports.useContext,ge={x:0,y:0},Mt=function(e){var n,r=e.prefixCls,o=e.src,i=e.alt,s=e.onClose;e.afterClose;var c=e.visible,u=e.icons,f=u===void 0?{}:u,l=e.rootClassName,v=e.countRender,g=Ve(e,Sr),R=f.rotateLeft,P=f.rotateRight,E=f.zoomIn,_=f.zoomOut,G=f.close,M=f.left,V=f.right,N=ze(1),L=b(N,2),w=L[0],k=L[1],Z=ze(0),B=b(Z,2),X=B[0],U=B[1],te=wr(ge),z=b(te,2),h=z[0],O=z[1],D=Ct(),y=Ct({originX:0,originY:0,deltaX:0,deltaY:0}),Y=ze(!1),J=b(Y,2),W=J[0],ne=J[1],$=Er(rt),A=$.previewUrls,re=$.current,oe=$.isPreviewGroup,T=$.setCurrent,x=A.size,I=Array.from(A.keys()),m=I.indexOf(re),H=oe?A.get(re):o,Q=oe&&x>1,ue=ze({wheelDirection:0}),se=b(ue,2),fe=se[0],Ze=se[1],Oe=function(){k(1),U(0),O(ge)},he=function(){k(function(d){return d+1}),O(ge)},de=function(){w>1&&k(function(d){return d-1}),O(ge)},Be=function(){U(function(d){return d+90})},_e=function(){U(function(d){return d-90})},Xe=function(d){d.preventDefault(),d.stopPropagation(),m>0&&T(I[m-1])},Ie=function(d){d.preventDefault(),d.stopPropagation(),m<x-1&&T(I[m+1])},ve=q(ie({},"".concat(r,"-moving"),W)),me="".concat(r,"-operations-operation"),be="".concat(r,"-operations-icon"),Ye=[{icon:G,onClick:s,type:"close"},{icon:E,onClick:he,type:"zoomIn"},{icon:_,onClick:de,type:"zoomOut",disabled:w===1},{icon:P,onClick:Be,type:"rotateRight"},{icon:R,onClick:_e,type:"rotateLeft"}],Me=function(){if(c&&W){var d=D.current.offsetWidth*w,ee=D.current.offsetHeight*w,le=D.current.getBoundingClientRect(),pe=le.left,Re=le.top,Ee=X%180!==0;ne(!1);var $e=xr(Ee?ee:d,Ee?d:ee,pe,Re);$e&&O(C({},$e))}},Ke=function(d){d.button===0&&(d.preventDefault(),d.stopPropagation(),y.current.deltaX=d.pageX-h.x,y.current.deltaY=d.pageY-h.y,y.current.originX=h.x,y.current.originY=h.y,ne(!0))},Pe=function(d){c&&W&&O({x:d.pageX-y.current.deltaX,y:d.pageY-y.current.deltaY})},Fe=function(d){if(!!c){d.preventDefault();var ee=d.deltaY;Ze({wheelDirection:ee})}},Le=Rr(function(p){!c||!Q||(p.preventDefault(),p.keyCode===Ae.LEFT?m>0&&T(I[m-1]):p.keyCode===Ae.RIGHT&&m<x-1&&T(I[m+1]))},[m,x,I,T,Q,c]),Se=function(){c&&(w!==1&&k(1),(h.x!==ge.x||h.y!==ge.y)&&O(ge))};return ht(function(){var p=fe.wheelDirection;p>0?de():p<0&&he()},[fe]),ht(function(){var p,d,ee=we(window,"mouseup",Me,!1),le=we(window,"mousemove",Pe,!1),pe=we(window,"wheel",Fe,{passive:!1}),Re=we(window,"keydown",Le,!1);try{window.top!==window.self&&(p=we(window.top,"mouseup",Me,!1),d=we(window.top,"mousemove",Pe,!1))}catch{}return function(){ee.remove(),le.remove(),pe.remove(),Re.remove(),p&&p.remove(),d&&d.remove()}},[c,W,Le]),a.exports.createElement(It,S({transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:r,onClose:s,afterClose:Oe,visible:c,wrapClassName:ve,rootClassName:l},g),a.exports.createElement("ul",{className:"".concat(r,"-operations")},Q&&a.exports.createElement("li",{className:"".concat(r,"-operations-progress")},(n=v==null?void 0:v(m+1,x))!==null&&n!==void 0?n:"".concat(m+1," / ").concat(x)),Ye.map(function(p){var d=p.icon,ee=p.onClick,le=p.type,pe=p.disabled;return a.exports.createElement("li",{className:q(me,ie({},"".concat(r,"-operations-operation-disabled"),!!pe)),onClick:ee,key:le},a.exports.isValidElement(d)?a.exports.cloneElement(d,{className:be}):d)})),a.exports.createElement("div",{className:"".concat(r,"-img-wrapper"),style:{transform:"translate3d(".concat(h.x,"px, ").concat(h.y,"px, 0)")}},a.exports.createElement("img",{width:e.width,height:e.height,onMouseDown:Ke,onDoubleClick:Se,ref:D,className:"".concat(r,"-img"),src:H,alt:i,style:{transform:"scale3d(".concat(w,", ").concat(w,", 1) rotate(").concat(X,"deg)")}})),Q&&a.exports.createElement("div",{className:q("".concat(r,"-switch-left"),ie({},"".concat(r,"-switch-left-disabled"),m===0)),onClick:Xe},M),Q&&a.exports.createElement("div",{className:q("".concat(r,"-switch-right"),ie({},"".concat(r,"-switch-right-disabled"),m===x-1)),onClick:Ie},V))},kr=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName","crossOrigin","decoding","loading","referrerPolicy","sizes","srcSet","useMap","draggable"],Nr=["src","visible","onVisibleChange","getContainer","mask","maskClassName","icons"],wt=0,Ge=function(e){var n,r=e.src,o=e.alt,i=e.onPreviewClose,s=e.prefixCls,c=s===void 0?"rc-image":s,u=e.previewPrefixCls,f=u===void 0?"".concat(c,"-preview"):u,l=e.placeholder,v=e.fallback,g=e.width,R=e.height,P=e.style,E=e.preview,_=E===void 0?!0:E,G=e.className,M=e.onClick,V=e.onError,N=e.wrapperClassName,L=e.wrapperStyle,w=e.rootClassName,k=e.crossOrigin,Z=e.decoding,B=e.loading,X=e.referrerPolicy,U=e.sizes,te=e.srcSet,z=e.useMap,h=e.draggable,O=Ve(e,kr),D=l&&l!==!0,y=Ne(_)==="object"?_:{},Y=y.src,J=y.visible,W=J===void 0?void 0:J,ne=y.onVisibleChange,$=ne===void 0?i:ne,A=y.getContainer,re=A===void 0?void 0:A,oe=y.mask,T=y.maskClassName,x=y.icons,I=Ve(y,Nr),m=Y!=null?Y:r,H=W!==void 0,Q=Rt(!!W,{value:W,onChange:$}),ue=b(Q,2),se=ue[0],fe=ue[1],Ze=a.exports.useState(D?"loading":"normal"),Oe=b(Ze,2),he=Oe[0],de=Oe[1],Be=a.exports.useState(null),_e=b(Be,2),Xe=_e[0],Ie=_e[1],ve=he==="error",me=a.exports.useContext(rt),be=me.isPreviewGroup,Ye=me.setCurrent,Me=me.setShowPreview,Ke=me.setMousePosition,Pe=me.registerImage,Fe=a.exports.useState(function(){return wt+=1,wt}),Le=b(Fe,1),Se=Le[0],p=_&&!ve,d=a.exports.useRef(!1),ee=function(){de("normal")},le=function(K){V&&V(K),de("error")},pe=function(K){if(!H){var ot=dr(K.target),at=ot.left,it=ot.top;be?(Ye(Se),Ke({x:at,y:it})):Ie({x:at,y:it})}be?Me(!0):fe(!0),M&&M(K)},Re=function(K){K.stopPropagation(),fe(!1),H||Ie(null)},Ee=function(K){d.current=!1,he==="loading"&&(K==null?void 0:K.complete)&&(K.naturalWidth||K.naturalHeight)&&(d.current=!0,ee())};a.exports.useEffect(function(){var Ce=Pe(Se,m);return Ce},[]),a.exports.useEffect(function(){Pe(Se,m,p)},[m,p]),a.exports.useEffect(function(){ve&&de("normal"),D&&!d.current&&de("loading")},[r]);var $e=q(c,N,w,ie({},"".concat(c,"-error"),ve)),At=ve&&v?v:m,nt={crossOrigin:k,decoding:Z,draggable:h,loading:B,referrerPolicy:X,sizes:U,srcSet:te,useMap:z,alt:o,className:q("".concat(c,"-img"),ie({},"".concat(c,"-img-placeholder"),l===!0),G),style:C({height:R},P)};return a.exports.createElement(a.exports.Fragment,null,a.exports.createElement("div",S({},O,{className:$e,onClick:p?pe:M,style:C({width:g,height:R},L)}),a.exports.createElement("img",S({},nt,{ref:Ee},ve&&v?{src:v}:{onLoad:ee,onError:le,src:r},{width:g,height:R})),he==="loading"&&a.exports.createElement("div",{"aria-hidden":"true",className:"".concat(c,"-placeholder")},l),oe&&p&&a.exports.createElement("div",{className:q("".concat(c,"-mask"),T),style:{display:((n=nt.style)===null||n===void 0?void 0:n.display)==="none"?"none":void 0}},oe)),!be&&p&&a.exports.createElement(Mt,S({"aria-hidden":!se,visible:se,prefixCls:f,onClose:Re,mousePosition:Xe,src:At,alt:o,getContainer:re,icons:x,rootClassName:w},I)))};Ge.PreviewGroup=Pr;Ge.displayName="Image";var Or={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"};const _r=Or;var Lt=function(e,n){return a.exports.createElement(je,C(C({},e),{},{ref:n,icon:_r}))};Lt.displayName="RotateLeftOutlined";const Ir=a.exports.forwardRef(Lt);var Mr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"};const Lr=Mr;var $t=function(e,n){return a.exports.createElement(je,C(C({},e),{},{ref:n,icon:Lr}))};$t.displayName="RotateRightOutlined";const $r=a.exports.forwardRef($t);var Tr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};const Ur=Tr;var Tt=function(e,n){return a.exports.createElement(je,C(C({},e),{},{ref:n,icon:Ur}))};Tt.displayName="ZoomInOutlined";const zr=a.exports.forwardRef(Tt);var Dr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};const Ar=Dr;var Ut=function(e,n){return a.exports.createElement(je,C(C({},e),{},{ref:n,icon:Ar}))};Ut.displayName="ZoomOutOutlined";const Vr=a.exports.forwardRef(Ut);var Wr=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},zt={rotateLeft:a.exports.createElement(Ir,null),rotateRight:a.exports.createElement($r,null),zoomIn:a.exports.createElement(zr,null),zoomOut:a.exports.createElement(Vr,null),close:a.exports.createElement(Xt,null),left:a.exports.createElement(Yt,null),right:a.exports.createElement(Kt,null)},Hr=function(e){var n=e.previewPrefixCls,r=e.preview,o=Wr(e,["previewPrefixCls","preview"]),i=a.exports.useContext(Et),s=i.getPrefixCls,c=s("image-preview",n),u=s(),f=a.exports.useMemo(function(){if(r===!1)return r;var l=Ne(r)==="object"?r:{};return S(S({},l),{transitionName:We(u,"zoom",l.transitionName),maskTransitionName:We(u,"fade",l.maskTransitionName)})},[r]);return a.exports.createElement(Ge.PreviewGroup,S({preview:f,previewPrefixCls:c,icons:zt},o))};const jr=Hr;var xt=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},Dt=function(e){var n=e.prefixCls,r=e.preview,o=xt(e,["prefixCls","preview"]),i=a.exports.useContext(Et),s=i.getPrefixCls,c=i.locale,u=c===void 0?lt:c,f=i.getPopupContainer,l=s("image",n),v=s(),g=u.Image||lt.Image,R=a.exports.useMemo(function(){if(r===!1)return r;var P=Ne(r)==="object"?r:{},E=P.getContainer,_=xt(P,["getContainer"]);return S(S({mask:a.exports.createElement("div",{className:"".concat(l,"-mask-info")},a.exports.createElement(ir,null),g==null?void 0:g.preview),icons:zt},_),{getContainer:E||f,transitionName:We(v,"zoom",P.transitionName),maskTransitionName:We(v,"fade",P.maskTransitionName)})},[r,g]);return a.exports.createElement(Ge,S({prefixCls:l,preview:R},o))};Dt.PreviewGroup=jr;const Gr=Dt;class Zr{getUnusedResource(){return rr.warpOnEvent(async e=>{const n=await Ft.pageToAllList(He.list.bind(He),{fields:["id","title","mime"]});let r=0;return await kt.filter(n,tr(async o=>{const i=!await this.checkUsed(o.id);return e.process({title:o.title,all:n.length,rate:r++}),i},10))})}async checkUsed(e){return(await qt.search({query:`"](:/${e})"`})).items.length>0}}const Br=new Zr;function yt(t){const e=Qt(localStorage).settings;return`${e==null?void 0:e.baseUrl}/resources/${t}/file?token=${e==null?void 0:e.token}`}const rn=()=>{const[t,e]=a.exports.useState([]),[n,r]=a.exports.useState(""),[o,i]=ct(async()=>{try{const l=await Br.getUnusedResource().on("process",v=>{r(ce.t("unusedResource.msg.process",v))});console.log("list: ",l),e(l)}catch{Jt.error(ce.t("unusedResource.msg.error"))}});async function s(l){e(nr(v=>v.filter(g=>g.id!==l))),await He.remove(l)}async function c(l){await er(yt(l))}const[u,f]=ct(async()=>{await kt.forEach(t,async l=>{await He.remove(l.id)}),e([])},[t]);return a.exports.createElement(or,{title:ce.t("unusedResource.title"),extra:a.exports.createElement(ar,null,a.exports.createElement(Te,{onClick:i},ce.t("common.action.check")),a.exports.createElement(Te,{disabled:t.length===0,danger:!0,loading:u.loading,onClick:f},ce.t("unusedResource.action.removeAll")))},a.exports.createElement(qe,{dataSource:t,locale:{emptyText:ce.t("unusedResource.listEmptyText")},renderItem:l=>a.exports.createElement(qe.Item,{key:l.id,actions:[a.exports.createElement(Te,{onClick:()=>s(l.id)},ce.t("common.action.remove")),a.exports.createElement(Te,{onClick:()=>c(l.id)},ce.t("common.action.download"))],extra:l.mime.startsWith("image/")&&a.exports.createElement(Gr,{src:yt(l.id),width:300})},a.exports.createElement(qe.Item.Meta,{title:l.title})),loading:{spinning:o.loading,tip:n}}))};export{Gr as I,rn as U,yt as b};
